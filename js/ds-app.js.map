{"version":3,"sources":["webpack://dsApp/./ds.plugin.config.js","webpack://dsApp/./ds.plugin.integrity.js","webpack://dsApp/../ds-plugin-action/ds.plugin.config.js","webpack://dsApp/../ds-plugin-content/ds.plugin.config.js","webpack://dsApp/../ds-plugin-content/ds.plugin.integrity.js","webpack://dsApp/../ds-plugin-element/ds.plugin.config.js","webpack://dsApp/../ds-plugin-event/ds.plugin.config.js","webpack://dsApp/../ds-plugin-layout/ds.plugin.config.js","webpack://dsApp/../ds-plugin-manager/ds.plugin.config.js","webpack://dsApp/../ds-plugin-operators/ds.plugin.config.js","webpack://dsApp/../ds-plugin-params/ds.plugin.config.js","webpack://dsApp/../ds-plugin-utilities/ds.plugin.config.js","webpack://dsApp/webpack/bootstrap","webpack://dsApp/./node_modules/@dooksa/ds-plugin/src/index.js","webpack://dsApp/../ds-plugin-action/src/index.js","webpack://dsApp/../ds-plugin-layout/src/index.js","webpack://dsApp/../ds-plugin-element/src/index.js","webpack://dsApp/../ds-plugin-content/src/index.js","webpack://dsApp/../ds-plugin-operators/src/index.js","webpack://dsApp/../ds-plugin-event/src/index.js","webpack://dsApp/../ds-plugin-params/src/index.js","webpack://dsApp/../ds-plugin-utilities/node_modules/nanoid/index.prod.js","webpack://dsApp/../ds-plugin-utilities/src/index.js","webpack://dsApp/../ds-plugins/src/index.js","webpack://dsApp/../ds-plugin-manager/node_modules/@dooksa/script-loader/src/index.js","webpack://dsApp/../ds-plugin-manager/src/index.js","webpack://dsApp/./src/app.js","webpack://dsApp/./src/index.js"],"names":["hash","require","module","exports","name","filename","version","integrity","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","Plugin","plugin","context","this","_context","data","i","length","item","pluginMetadata","dependencies","dispatch","value","getters","key","Object","hasOwnProperty","call","defineProperty","get","charAt","bind","methods","setup","prototype","init","params","items","conditions","lastActionIndex","root","instanceId","parentItemId","actions","results","lastItem","valid","hasCallback","nanoid","_compare","action","itemId","when","callback","onSuccess","onError","Array","isArray","id","_createActions","method","rules","result","_action","push","type","computedParams","paramType","paramItems","$method","_onError","callbackParams","_onSuccess","hasLogicalOperator","condition","operator","values","compareResults","_getProcessValue","_getter","$context","store","_pluginAction","$action","_pluginMethod","content","children","layout","baseItems","add","addBaseItem","create","_getLayout","_render","setBaseItem","setChildren","setContent","setLayout","_content","index","childItems","fragments","window","DocumentFragment","component","sibling","_sibling","childComponent","appendChild","contentIndex","append","indexes","newItems","dsDiv","is","tag","dsH1","dsH2","dsH3","dsH4","dsH5","dsH6","dsP","dsButton","dsImage","dsLabel","dsInput","dsTextarea","attributes","rows","DsText","DsElementMixin","base","constructor","super","connectedCallback","elementId","disconnectedCallback","DsDivElement","HTMLDivElement","innerHTML","DsParagraphElement","HTMLParagraphElement","DsH1Element","HTMLHeadingElement","DsH2Element","DsH3Element","DsH4Element","DsH5Element","DsH6Element","DsButtonElement","HTMLButtonElement","addEventListener","e","DsInputElement","HTMLInputElement","payload","target","DsLabelElement","HTMLLabelElement","DsTextAreaElement","HTMLTextAreaElement","innerText","Text","textContent","customElements","define","extends","_getComponent","classList","join","_createHTMLElement","createNode","element","document","createElement","setAttribute","observers","defaultItems","text","image","src","alt","html","$getter","_generateContent","remove","set","subscribe","_getContent","_setObserver","unsubscribe","_getObservers","indexOf","splice","update","_updateObservers","_updateObserver","observer","dsContent","operators","v","eval","compare","arrayRemove","list","newList","hasItem","j","arrayNextKeyValue","currentValue","arrayPrevKeyValue","arrayFindByKeyValue","valueIndex","hasValue","rangeItem","nextIndex","prevIndex","arrayMove","indexEnd","listMiddle","sort","a","b","startList","offset","listEnd","concat","arrayMerge","flat","_$index","addListener","emit","_listener","console","log","removeListener","usedBy","instance","process","variables","debug","config","iteration","_processVariables","setParams","_getParam","_$id","_get","_$computed","_$computedParams","_getValue","dotNotations","split","_getVariable","variable","_arrayTransform","map","listItem","mapItems","mapItem","k","dotNotation","dKey","onIteration","_eval","expression","_processValues","_evalBoolean","_evalNumber","_evalString","return","_$itemId","keys","random","bytes","crypto","getRandomValues","Uint8Array","customAlphabet","alphabet","size","getRandom","mask","Math","LN2","step","customRandom","docId","alphabetLength","generateDocId","generateInstanceId","ScriptLoader","async","crossOrigin","defer","nonce","referrerPolicy","nomodule","customParams","globalVars","queue","loaded","loading","Promise","all","load","loadScript","resolve","reject","url","createUrl","setScript","paramKey","replace","getElementById","script","onerror","onload","globalVar","head","_methods","_getters","buildId","additionalPlugins","plugins","appBuildId","appPlugins","appAdditionalPlugins","isLoaded","setupOnRequest","setupOnRequestQueue","metadata","isDev","_method","_add","use","_actionExists","_addMetadata","_callbackWhenAvailable","baseName","_isLoading","then","error","_install","pluginImport","_load","setupOptions","depQueue","depPlugin","dsPlugin","DsPlugin","_setup","catch","scriptOptions","statusCode","message","pluginLoader","Error","pluginResult","options","getter","onDemand","loadingPlugin","rootElement","assetsURL","pathFilename","location","pathname","$Script","hostname","dsAppCache","widgets","dsLayout","dsElement","dsAction","dsEvent","dsParameters","dsOperators","dsUtilities","dsApp","pluginManager","dsManager","build"],"mappings":"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","file":"ds-app.js","sourcesContent":["const { hash } = require('./ds.plugin.integrity.js')\n\nmodule.exports = {\n  name: 'dsApp',\n  filename: 'ds-app',\n  version: 1,\n  integrity: hash\n}\n","module.exports = { hash: 'sha512-hkhD8NtPFiKheeJH+nk7SvMt+1e4KXqTzEHbvwRi6U3a2Jov1BY9RngE9Kf1+xW3bzjL65fDE/Uqy9wm6rOL7Q==' }\n","module.exports = {\n  name: 'dsAction',\n  filename: 'ds-action',\n  version: 1\n}\n","const { hash } = require('./ds.plugin.integrity.js')\n\nmodule.exports = {\n  name: 'dsContent',\n  filename: 'ds-content',\n  version: 1,\n  integrity: hash\n}\n","module.exports = { hash: 'sha512-z5UgOiTBL4qHC08JHij7jkWr88NaQCioZ76gtJZzzY0VNtu0rPTfHl1h5hGzledJT3FOv0b1ReNw7eLu+5au0w==' }\n","module.exports = {\n  name: 'dsElement',\n  filename: 'ds-element',\n  version: '1'\n}\n","module.exports = {\n  name: 'dsEvent',\n  filename: 'ds-event',\n  version: 1\n}\n","module.exports = {\n  name: 'dsLayout',\n  filename: 'ds-layout',\n  version: 1\n}\n","module.exports = {\n  name: 'dsManager',\n  filename: 'ds-plugin-manager',\n  version: 1\n}\n","module.exports = {\n  name: 'dsOperators',\n  filename: 'ds-operators',\n  version: '0.1.0'\n}\n","module.exports = {\n  name: 'dsParameters',\n  filename: 'ds-parameters',\n  version: 1\n}\n","module.exports = {\n  name: 'dsUtilities',\n  filename: 'ds-utilities',\n  version: 1\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * @classdesc Plugins are used to extend and customise the Dooksa application builder.\n * @class\n * @param {Object} plugin - The plugin object used by the Plugin constructor.\n * @param {string} plugin.name - The name of the plugin.\n * @param {number} plugin.version - The version of the plugin.\n * @param {Object[]} plugin.dependencies - List of dependent plugins, e.g. if this plugin x used y by running an action: x.$action('y', params).\n * @param {string} plugin.dependencies[].name - The name of the dependent plugin.\n * @param {number} plugin.dependencies[].version - The version of the dependent plugin.\n * @param {Object} plugin.setup - This .\n * @param {Object.<string, (number|boolean|string|array|object)>} plugin.data - The object that contains plugins data.\n * @param {Object.<string, object>} plugin.getters - The version of the plugin.\n * @param {Object.<string, object>} plugin.methods - The version of the plugin.\n * @param {Object[]} context - Context is shared data between plugins.\n * @param {string} context.name - The name will be the key used within the plugin, e.g. '$action' = this.$action\n * @param {number} context.dispatch - If true the context.value (function) return value will be used.\n * @param {(string|object)} context.value - The value of the context.\n */\nfunction Plugin (plugin, context = []) {\n  this.name = plugin.name\n  this.version = plugin.version\n  this._context = {}\n  // set data to context\n  if (plugin.data) {\n    this._context = { ...plugin.data }\n  }\n  // set context to plugin\n  for (let i = 0; i < context.length; i++) {\n    const item = context[i]\n    const pluginMetadata = {\n      name: plugin.name,\n      version: plugin.version,\n      dependencies: plugin.dependencies\n    }\n\n    if (item.dispatch) {\n      this._context[item.name] = item.value(pluginMetadata)\n    } else {\n      this._context[item.name] = item.value\n    }\n  }\n  // set dependencies\n  if (plugin.dependencies) {\n    this.dependencies = plugin.dependencies\n  }\n  // set getters\n  if (plugin.getters) {\n    const getters = {}\n\n    for (const key in plugin.getters) {\n      if (Object.hasOwnProperty.call(plugin.getters, key)) {\n        const item = plugin.getters[key]\n        // Add getter\n        Object.defineProperty(this._context, key, { get: item })\n        // Catch the public getter\n        if (key.charAt(0) !== '_') {\n          getters[key] = item.bind(this._context)\n        }\n      }\n    }\n\n    this.getters = getters\n  }\n  // set methods\n  if (plugin.methods) {\n    const methods = {}\n\n    for (const key in plugin.methods) {\n      if (Object.hasOwnProperty.call(plugin.methods, key)) {\n        const item = plugin.methods[key]\n\n        this._context[key] = item\n\n        // Catch the public method\n        if (key.charAt(0) !== '_') {\n          methods[key] = item.bind(this._context)\n        }\n      }\n    }\n\n    this.methods = methods\n  }\n  // set setup function\n  if (plugin.setup) {\n    this.setup = plugin.setup.bind(this._context)\n  }\n}\n\n/**\n * Runs the setup function within the plugin if present, this function is intended to be used by the parent plugin\n * @param {Object, <string, (number|boolean|string|array|object)>} params - These are the parameters required by the setup function\n * @returns {(number|boolean|string|array|object)}\n */\nPlugin.prototype.init = function (params) {\n  if (this.setup) {\n    return this.setup(params)\n  }\n}\n\nexport default Plugin\n","import { name, version } from '../ds.plugin.config'\n\n/**\n * Dooksa action plugin.\n * @module plugin\n */\nexport default {\n  name,\n  version,\n  dependencies: [\n    {\n      name: 'dsParameters',\n      version: 1\n    }\n  ],\n  data: {\n    items: {},\n    conditions: {},\n    lastActionIndex: {}\n  },\n  methods: {\n    dispatch ({\n      root,\n      instanceId,\n      parentItemId,\n      actions = [],\n      conditions = [],\n      data,\n      results = {}\n    }) {\n      let lastItem = false\n      let valid = true\n      let hasCallback = false\n      // ISSUE: [DS-589] Use ds-plugin-utilities to generate a id\n      if (root) {\n        instanceId = nanoid()\n        this.lastActionIndex[instanceId] = actions.length - 1\n      }\n\n      if (conditions.length) {\n        valid = this._compare(conditions, { instanceId: nanoid(), parentItemId, data })\n      }\n\n      for (let i = 0; i < actions.length; i++) {\n        const action = actions[i]\n        const itemId = action.itemId\n        const item = action.items[itemId]\n\n        if (item.conditions) {\n          valid = this._compare(item.conditions, { instanceId: nanoid(), parentItemId, data })\n        }\n\n        if (Object.hasOwnProperty.call(item, 'when') && valid !== item.when) {\n          return\n        }\n\n        // Check if item has a literal value\n        if (Object.hasOwnProperty.call(item, 'value')) {\n          return [item.value]\n        }\n\n        const callback = {\n          onSuccess: null,\n          onError: null\n        }\n        // TODO: [DS-561] make sure onSuccess value exists to avoid complex condition\n        if (Array.isArray(item.onSuccess) && item.onSuccess.length) {\n          hasCallback = true\n\n          callback.onSuccess = {\n            params: {\n              id,\n              parentItemId: itemId,\n              actions: this._createActions(item.onSuccess, action),\n              data\n            },\n            method: this.rules.bind(this)\n          }\n        }\n\n        // TODO: [DS-562] make sure onError value exists to avoid complex condition\n        if (Array.isArray(item.onError) && item.onSuccess.length) {\n          hasCallback = true\n\n          callback.onError = {\n            params: {\n              id: instanceId,\n              parentItemId: itemId,\n              actions: this._createActions(item.onError, action),\n              data\n            },\n            method: this.rules.bind(this)\n          }\n        }\n\n        // Check if this action is the last item\n        if (i === this.lastActionIndex[id] && !hasCallback) {\n          lastItem = true\n          delete this.lastActionIndex[id]\n        }\n\n        const result = this._action({\n          id,\n          itemId,\n          items: action.items,\n          conditions: action.conditions,\n          parentItemId,\n          ...item,\n          callback,\n          data,\n          results,\n          lastItem\n        })\n\n        if (result) {\n          results[itemId] = result\n        }\n      }\n\n      return results\n    },\n    _createActions (items, action) {\n      const actions = []\n\n      for (let i = 0; i < items.length; i++) {\n        actions.push({\n          itemId: items[i],\n          items: action.items,\n          params: action.params\n        })\n      }\n\n      return actions\n    },\n    _action ({\n      id,\n      name,\n      type,\n      computedParams,\n      paramType,\n      paramItems,\n      params,\n      data,\n      results,\n      callback = {},\n      itemId,\n      parentItemId,\n      lastItem\n    }) {\n      if (computedParams) {\n        params = this.$method('dsParameters/process', {\n          id,\n          itemId,\n          parentItemId,\n          paramType,\n          params,\n          paramItems,\n          data,\n          results,\n          lastItem\n        })\n      }\n\n      return this['_' + type]({ name, params, callback })\n    },\n    /**\n     * This callback is used after a rule\n     * @callback onEventCallback\n     */\n\n    /**\n     * Runs onError callback\n     * @param {onEventCallback} callback - This callback is expected to be a rule or another function within the workflow scope\n     * @param {Object} params - An object that are params for the rules callback\n     * @param {*} result - The result from the parent function to pass onto the callback\n     */\n    _onError (callback, params, result) {\n      let callbackParams = result\n\n      if (params) {\n        callbackParams = { ...params, result }\n      }\n\n      callback(callbackParams)\n    },\n    /**\n     * Runs onSuccess callback\n     * @param {onEventCallback} callback - This callback is expected to be a rule or another function within the workflow scope\n     * @param {Object} params - An object that are params for the rules callback\n     * @param {*} results - The results from the parent function to pass onto the callback\n     */\n    _onSuccess (callback, params, results) {\n      let callbackParams = results\n\n      if (params) {\n        callbackParams = { ...params, results }\n      }\n\n      callback(callbackParams)\n    },\n    _compare (conditions, { instanceId, parentItemId, data }) {\n      let result = false\n      let hasLogicalOperator = false\n      let results = []\n\n      for (let i = 0; i < conditions.length; i++) {\n        const condition = conditions[i]\n        const operator = condition.name\n\n        if (operator === '&&' || operator === '||') {\n          results = [...results, operator]\n          hasLogicalOperator = true\n        } else {\n          const values = []\n          const length = condition.values.length - 1\n\n          for (let i = 0; i < condition.values.length; i++) {\n            const item = condition.values[i]\n            let value = item.value\n\n            if (Object.hasOwnProperty.call(item, 'itemId')) {\n              value = this._action({\n                instanceId,\n                itemId: item.itemId,\n                parentItemId,\n                paramItems: condition.params,\n                data,\n                lastItem: length === i,\n                ...condition.items[item.itemId]\n              })\n            }\n\n            values.push(value)\n          }\n\n          const compareResults = this.$method('dsOperators/eval', { name: operator, values })\n\n          results.push(compareResults)\n        }\n      }\n\n      if (hasLogicalOperator) {\n        result = this.$method('dsOperators/compare', results)\n      } else {\n        for (let i = 0; i < results.length; i++) {\n          result = true\n\n          if (!results[i]) {\n            result = false\n            break\n          }\n        }\n      }\n\n      return result\n    },\n    _getProcessValue ({ params, callback }) {\n      const onSuccess = callback.onSuccess\n      const onError = callback.onError\n      const results = params\n\n      if (onSuccess) {\n        this._onSuccess(onSuccess.method || onSuccess, onSuccess.params, results)\n      }\n\n      if (onError) {\n        this._onError(onError.method || onError, onError.params)\n      }\n\n      return results\n    },\n    _getter ({ name, params, callback }) {\n      const onSuccess = callback.onSuccess\n      const onError = callback.onError\n      let results\n\n      if (typeof this.$context.store.getters[name] === 'function') {\n        results = this.$context.store.getters[name](params)\n      } else {\n        results = this.$context.store.getters[name]\n      }\n\n      if (results) {\n        if (onSuccess) {\n          this._onSuccess(onSuccess.method || onSuccess, onSuccess.params, results)\n        }\n      }\n\n      if (onError) {\n        if (onError) {\n          this._onError(onError.method || onError, onError.params)\n        }\n      }\n\n      return results\n    },\n    _pluginAction ({ name, params, callback }) {\n      this.$action(name, params, callback)\n    },\n    _pluginMethod ({ name, params, callback }) {\n      const onSuccess = callback.onSuccess\n      const results = this.$method(name, params)\n\n      if (onSuccess) {\n        this._onSuccess(onSuccess.method || onSuccess, onSuccess.params, results)\n      }\n    }\n  }\n}\n","import { name, version } from '../ds.plugin.config'\n\n/**\n * Dooksa widget plugin.\n * @module plugin\n */\nexport default {\n  name,\n  version,\n  dependencies: [\n    {\n      name: 'dsElement',\n      version: 1\n    },\n    {\n      name: 'dsContent',\n      version: 1\n    }\n  ],\n  data: {\n    content: {},\n    children: {},\n    layout: {},\n    baseItems: {},\n    items: {}\n  },\n  methods: {\n    add (context, { id, layout, content, children }) {\n      this.children[id] = children\n      this.layout[id] = layout\n      this.content[id] = content\n    },\n    addBaseItem (context, { id, item }) {\n      this.baseItems[id] = item\n    },\n    create (context, id) {\n      const items = this._getLayout(id)\n\n      return this._render(items)\n    },\n    setBaseItem (context, item) {\n      this.baseItems = { ...this.baseItems, ...item }\n    },\n    setChildren (context, item) {\n      this.children = { ...this.children, ...item }\n    },\n    setContent (context, item) {\n      this.content = { ...this.content, ...item }\n    },\n    setLayout (context, item) {\n      this.layout = { ...this.layout, ...item }\n    },\n    _content (id, index) {\n      return this.content[id][index]\n    },\n    _getLayout (id) {\n      return {\n        id,\n        layout: this.layout[id],\n        children: this.children[id]\n      }\n    },\n    _render ({ id, layout, children, childItems }) {\n      const fragments = new window.DocumentFragment()\n\n      for (let i = 0; i < children.length; i++) {\n        const item = childItems ? childItems[children[i]] : layout[children[i]]\n        let component\n\n        if (item.component.type === 'element') {\n          component = this.$method('dsElement/create', item.component)\n        } else {\n          component = this.$method('dsElement/createNode', item.component.id)\n        }\n\n        if (item.children) {\n          const sibling = this._sibling(layout, item.children)\n          const childComponent = this._render({\n            id,\n            layout,\n            children: sibling.children,\n            childItems: sibling.items\n          })\n          component.appendChild(childComponent)\n        } else {\n          const content = this._content(id, item.contentIndex)\n\n          this.$method('dsContent/subscribe', { id: content.id, item: component })\n        }\n\n        fragments.append(component)\n      }\n\n      return fragments\n    },\n    _sibling (items, indexes) {\n      const newItems = {\n        items: [],\n        children: []\n      }\n\n      for (let i = 0; i < indexes.length; i++) {\n        const index = indexes[i]\n\n        newItems.items.push(items[index])\n        newItems.children.push(i)\n      }\n\n      return newItems\n    }\n  }\n}\n","import { name, version } from '../ds.plugin.config'\n\n/**\n * Dooksa element plugin.\n * @module plugin\n */\nexport default {\n  name,\n  version,\n  dependencies: [\n    {\n      name: 'dsEvent',\n      version: 1\n    }\n  ],\n  data: {\n    items: {\n      dsDiv: {\n        is: 'ds-div',\n        tag: 'div'\n      },\n      dsH1: {\n        is: 'ds-h1',\n        tag: 'h1'\n      },\n      dsH2: {\n        is: 'ds-h2',\n        tag: 'h2'\n      },\n      dsH3: {\n        is: 'ds-h3',\n        tag: 'h3'\n      },\n      dsH4: {\n        is: 'ds-h4',\n        tag: 'h4'\n      },\n      dsH5: {\n        is: 'ds-h5',\n        tag: 'h5'\n      },\n      dsH6: {\n        is: 'ds-h6',\n        tag: 'h6'\n      },\n      dsP: {\n        is: 'ds-p',\n        tag: 'p'\n      },\n      dsButton: {\n        is: 'ds-button',\n        tag: 'button'\n      },\n      dsImage: {\n        is: 'ds-image',\n        tag: 'img'\n      },\n      dsLabel: {\n        is: 'ds-label',\n        tag: 'label'\n      },\n      dsInput: {\n        is: 'ds-input',\n        tag: 'input'\n      },\n      dsTextarea: {\n        is: 'ds-textarea',\n        tag: 'textarea',\n        attributes: { rows: '3' }\n      },\n      get dsText () {\n        return new window.DsText()\n      },\n      get dsFragment () {\n        return new window.DocumentFragment()\n      }\n    }\n  },\n  setup () {\n    const DsElementMixin = (base) => (\n      class DsElementMixin extends base {\n        constructor () {\n          super()\n\n          this.$action = () => {}\n        }\n\n        connectedCallback () {\n          this.$action('dsEvent/emit', {\n            id: this.elementId,\n            name: 'mounted'\n          })\n        }\n\n        disconnectedCallback () {\n          this.$action('dsEvent/emit', {\n            id: this.elementId,\n            name: 'unmounted'\n          })\n        }\n      }\n    )\n\n    class DsDivElement extends DsElementMixin(window.HTMLDivElement) {\n      get dsContent () {\n        return this.innerHTML\n      }\n\n      set dsContent (value) {\n        this.innerHTML = value\n      }\n    }\n\n    class DsParagraphElement extends DsElementMixin(window.HTMLParagraphElement) {\n      get dsContent () {\n        return this.innerHTML\n      }\n\n      set dsContent (value) {\n        this.innerHTML = value\n      }\n    }\n\n    class DsH1Element extends DsElementMixin(window.HTMLHeadingElement) {\n      get dsContent () {\n        return this.innerHTML\n      }\n\n      set dsContent (value) {\n        this.innerHTML = value\n      }\n    }\n\n    class DsH2Element extends DsElementMixin(window.HTMLHeadingElement) {\n      get dsContent () {\n        return this.innerHTML\n      }\n\n      set dsContent (value) {\n        this.innerHTML = value\n      }\n    }\n\n    class DsH3Element extends DsElementMixin(window.HTMLHeadingElement) {\n      get dsContent () {\n        return this.innerHTML\n      }\n\n      set dsContent (value) {\n        this.innerHTML = value\n      }\n    }\n\n    class DsH4Element extends DsElementMixin(window.HTMLHeadingElement) {\n      get dsContent () {\n        return this.innerHTML\n      }\n\n      set dsContent (value) {\n        this.innerHTML = value\n      }\n    }\n\n    class DsH5Element extends DsElementMixin(window.HTMLHeadingElement) {\n      get dsContent () {\n        return this.innerHTML\n      }\n\n      set dsContent (value) {\n        this.innerHTML = value\n      }\n    }\n\n    class DsH6Element extends DsElementMixin(window.HTMLHeadingElement) {\n      get dsContent () {\n        return this.innerHTML\n      }\n\n      set dsContent (value) {\n        this.innerHTML = value\n      }\n    }\n\n    class DsButtonElement extends DsElementMixin(window.HTMLButtonElement) {\n      constructor () {\n        super()\n\n        this.addEventListener('click', (e) => {\n          this.$action('dsEvent/emit', {\n            id: this.elementId,\n            name: 'click'\n          })\n        })\n      }\n\n      get dsContent () {\n        return this.innerHTML\n      }\n\n      set dsContent (value) {\n        this.innerHTML = value\n      }\n    }\n\n    class DsInputElement extends DsElementMixin(window.HTMLInputElement) {\n      constructor () {\n        super()\n\n        this.addEventListener('input', (e) => {\n          this.$action('dsEvent/emit', {\n            id: this.elementId,\n            name: 'input',\n            payload: e.target.value\n          })\n        })\n      }\n\n      get dsContent () {\n        return this.value\n      }\n\n      set dsContent (value) {\n        this.value = value\n      }\n    }\n\n    class DsLabelElement extends DsElementMixin(window.HTMLLabelElement) {\n      get dsContent () {\n        return this.innerHTML\n      }\n\n      set dsContent (value) {\n        this.innerHTML = value\n      }\n    }\n\n    class DsTextAreaElement extends DsElementMixin(window.HTMLTextAreaElement) {\n      constructor () {\n        super()\n\n        this.addEventListener('input', (e) => {\n          this.$action('dsEvent/emit', {\n            id: this.elementId,\n            name: 'input',\n            payload: e.target.value\n          })\n        })\n      }\n\n      get dsContent () {\n        return this.innerText\n      }\n\n      set dsContent (value) {\n        this.innerText = value\n      }\n    }\n\n    class DsText extends window.Text {\n      get dsContent () {\n        return this.textContent\n      }\n\n      set dsContent (value) {\n        this.textContent = value\n      }\n    }\n\n    window.DsText = DsText\n    window.customElements.define('ds-h1', DsH1Element, { extends: 'h1' })\n    window.customElements.define('ds-h2', DsH2Element, { extends: 'h2' })\n    window.customElements.define('ds-h3', DsH3Element, { extends: 'h3' })\n    window.customElements.define('ds-h4', DsH4Element, { extends: 'h4' })\n    window.customElements.define('ds-h5', DsH5Element, { extends: 'h5' })\n    window.customElements.define('ds-h6', DsH6Element, { extends: 'h6' })\n    window.customElements.define('ds-p', DsParagraphElement, { extends: 'p' })\n    window.customElements.define('ds-div', DsDivElement, { extends: 'div' })\n    window.customElements.define('ds-button', DsButtonElement, { extends: 'button' })\n    window.customElements.define('ds-input', DsInputElement, { extends: 'input' })\n    window.customElements.define('ds-label', DsLabelElement, { extends: 'label' })\n    window.customElements.define('ds-textarea', DsTextAreaElement, { extends: 'textarea' })\n  },\n  methods: {\n    create (context, item) {\n      const component = this._getComponent(item.id)\n      const attributes = []\n\n      if (item.classList) {\n        attributes.push(['class', item.classList.join(' ')])\n      }\n\n      if (item.attributes) {\n        component.attributes = { ...component.attributes, ...item.attributes }\n\n        for (const key in component.attributes) {\n          attributes.push([key, component.attributes[key]])\n        }\n      } else if (component.attributes) {\n        for (const key in component.attributes) {\n          attributes.push([key, component.attributes[key]])\n        }\n      }\n\n      return this._createHTMLElement(component.tag, component.is, attributes)\n    },\n    createNode (context, id) {\n      return this.items[id]\n    },\n    _getComponent (id) {\n      return { ...this.items[id] }\n    },\n    _createHTMLElement (tag, is, attributes = []) {\n      const element = document.createElement(tag, { is })\n\n      element.$action = this.$action\n\n      for (let i = 0; i < attributes.length; i++) {\n        element.setAttribute(attributes[i][0], attributes[i][1])\n      }\n\n      return element\n    }\n  }\n}\n","import { name, version } from '../ds.plugin.config'\n\n/**\n * Ds content plugin.\n * @module plugin\n */\nexport default {\n  name,\n  version,\n  dependencies: [\n    {\n      name: 'dsUtilities',\n      version: 1\n    }\n  ],\n  data: {\n    items: {},\n    observers: {},\n    defaultItems: {\n      text: {\n        value: '',\n        type: 'text'\n      },\n      image: {\n        value: {\n          src: '',\n          alt: ''\n        }\n      },\n      html: {\n        type: 'html',\n        value: ''\n      }\n    }\n  },\n  methods: {\n    create (context, items) {\n      const content = []\n\n      for (let i = 0; i < items.length; i++) {\n        const id = this.$getter('dsUtilities/generateInstanceId')\n        const type = items[i].type\n        const item = this._generateContent(type, items[i].value)\n\n        this.items[id] = item\n\n        content.push({ id, type })\n      }\n\n      return content\n    },\n    remove (context, { id }) {\n      if (this.items[id]) {\n        delete this.items[id]\n      }\n    },\n    set (context, item) {\n      this.items = { ...this.items, ...item }\n    },\n    subscribe (context, { id, item }) {\n      const content = this._getContent(id)\n\n      if (content) {\n        this._setObserver(id, item)\n      }\n    },\n    unsubscribe (context, { id, item }) {\n      const observers = this._getObservers(id)\n      const index = observers.indexOf(item)\n\n      if (index > -1) {\n        observers.splice(index, 1)\n      }\n    },\n    update (context, { id, value }) {\n      const content = this._getContent(id)\n\n      if (content) {\n        content.value = value\n\n        this._updateObservers(id, value)\n      }\n    },\n    _generateContent (type, value) {\n      const content = { ...this.defaultItems[type] }\n\n      if (value) {\n        content.value = value\n      }\n\n      return content\n    },\n    _getContent (id) {\n      return this.items[id]\n    },\n    _setObserver (id, item) {\n      const observers = this._getObservers(id)\n      const content = this._getContent(id)\n\n      if (observers.length) {\n        const index = observers.indexOf(item)\n\n        if (index === -1) {\n          observers.push(item)\n        }\n      } else {\n        this.observers[id] = [item]\n      }\n\n      this._updateObserver(id, item, content.value)\n    },\n    _getObservers (id) {\n      return this.observers[id] || []\n    },\n    _updateObserver (id, observer, value) {\n      const observers = this._getObservers(id)\n      const index = observers.indexOf(observer)\n\n      if (index > -1) {\n        observers[index].dsContent = value\n      }\n    },\n    _updateObservers (id, value) {\n      const observers = this._getObservers(id)\n\n      for (let i = 0; i < observers.length; i++) {\n        observers[i].dsContent = value\n      }\n    }\n  }\n}\n","import { name, version } from '../ds.plugin.config'\n\nexport default {\n  name,\n  version,\n  data: {\n    operators: {\n      '==': v => v[0] === v[1],\n      '!=': v => v[0] !== v[1],\n      '>': v => v[0] > v[1],\n      '>=': v => v[0] >= v[1],\n      '<': v => v[0] < v[1],\n      '<=': v => v[0] <= v[1],\n      '!': v => !v[0],\n      '!!': v => !!v[0],\n      '%': v => v[0] % v[1],\n      '++x': v => ++v[0],\n      'x++': v => v[0]++,\n      '--x': v => --v[0],\n      'x--': v => v[0]--,\n      '-': v => v[0] - v[1],\n      '+': v => v[0] + v[1],\n      '*': v => v[0] * v[1],\n      '**': v => v[0] ** v[1]\n    }\n  },\n  methods: {\n    /**\n     * Evaluate two values\n     * @param {Object} eval - The Object containing the data to evaluate two values\n     * @param {string} eval.name - Operator name\n     * @param {string[]|number[]} eval.values - Contains two values to be evaluated\n     */\n    eval ({ name, values }) {\n      return this.operators[name](values)\n    },\n    /**\n     * Compare two or more values\n     * @param {string[]|number[]} values - Contains two values or more values which are compared\n     */\n    compare (values) {\n      let result = false\n\n      for (let i = 0; i < values.length; i++) {\n        const value = values[i]\n\n        if (value === '&&') {\n          if ((values[i - 1] && values[i + 1])) {\n            result = true\n          } else {\n            break\n          }\n        }\n\n        if (value === '||') {\n          if ((values[i - 1] || values[i + 1])) {\n            result = true\n          } else {\n            break\n          }\n        }\n      }\n\n      return result\n    },\n    /**\n     * Remove items from an array\n     * @param {Object} arrayRemove - The Object containing the data to remove a group of items from an array\n     * @param {*[]} arrayRemove.list - The source array\n     * @param {number[]} arrayRemove.items - A list of indexes that will be removed\n     */\n    arrayRemove ({ list, items }) {\n      const newList = []\n\n      for (let i = 0; i < list.length; i++) {\n        let hasItem = false\n\n        for (let j = 0; j < items.length; j++) {\n          if (i === items[j]) {\n            hasItem = true\n            break\n          }\n        }\n\n        if (!hasItem) {\n          newList.push(list[i])\n        }\n      }\n\n      return newList\n    },\n    /**\n     * Find the next key value pair in a list\n     * @param {Object} nextKeyValue - The Object containing the params\n     * @param {*[]} nextKeyValue.list - An array of objects\n     * @param {string} nextKeyValue.key - The key used to compare\n     * @param {number} nextKeyValue.index - The index starting point\n     * @returns {[*, number]} An array with the found value and index\n     */\n    arrayNextKeyValue ({ list, key, index = 0 }) {\n      const currentValue = list[index][key]\n\n      for (let i = index; i < list.length; i++) {\n        if (list[i][key] !== currentValue) {\n          return [list[i][key], i]\n        }\n      }\n\n      return [currentValue, index]\n    },\n    /**\n     * Find the previous key value pair in a list\n     * @param {Object} nextKeyValue - The Object containing the params\n     * @param {*[]} nextKeyValue.list - An array of objects\n     * @param {string} nextKeyValue.key - The key used to compare\n     * @param {number} nextKeyValue.index - The index starting point\n     * @returns {[*, number]} An array with the found value and index\n     */\n    arrayPrevKeyValue ({ list, key, index = 0 }) {\n      const currentValue = list[index][key]\n\n      for (let i = index; i >= 0; i--) {\n        if (list[i][key] !== currentValue) {\n          return [list[i][key], i]\n        }\n      }\n\n      return [currentValue, index]\n    },\n    /**\n     * Find the indexes of objects within a list by key value pairs\n     * @param {Object} findByKeyValue - The Object containing the params\n     * @param {*[]} findByKeyValue.list - An array of objects\n     * @param {string} findByKeyValue.key - The key used to compare\n     * @param {[string, number]} findByKeyValue.valueIndex - The value uses to compare and the index starting point\n     * @returns {[number, number]} An array with the start and end numbered indexes, -1 indicates there was only 1 item found within a group\n     */\n    arrayFindByKeyValue ({ list, key, valueIndex }) {\n      const value = valueIndex[0]\n      const index = valueIndex[1] || 0\n      const hasValue = (i) => (list[i] && list[i][key] === value)\n      const rangeItem = []\n\n      for (let i = index; i < list.length; i++) {\n        const item = list[i]\n\n        if (item[key] === value) {\n          const nextIndex = i + 1\n\n          if (rangeItem.length) {\n            if (!hasValue(nextIndex)) {\n              rangeItem.push(i)\n\n              return rangeItem\n            }\n          } else {\n            let prevIndex = i - 1\n\n            if (index && hasValue(prevIndex)) {\n              while (hasValue(prevIndex)) {\n                prevIndex--\n              }\n\n              rangeItem.push(prevIndex + 1)\n\n              // check if item is not in a group\n              if (!hasValue(nextIndex)) {\n                rangeItem.push(i)\n\n                return rangeItem\n              }\n            } else {\n              rangeItem.push(i)\n\n              // check if item is not in a group\n              if (!hasValue(nextIndex)) {\n                rangeItem.push(i)\n\n                return rangeItem\n              }\n\n              // if last item in the list push the rangeItem\n              if (nextIndex === list.length) {\n                rangeItem.push(i)\n\n                return rangeItem\n              }\n            }\n          }\n        }\n      }\n    },\n    /**\n     * Move a group of items to a new position in an array\n     * @param {Object} arrayMove - The Object containing the data to move a group of items within an array\n     * @param {*[]} arrayMove.list - The source array\n     * @param {number[]} arrayMove.items - A list of indexes that need to move\n     * @param {number} arrayMove.index - The location the items will move to within the array\n     * @returns {Array} - New transformed array\n     */\n    arrayMove ({ list, items, index }) {\n      const length = items.length\n      let indexEnd = index - (length - 1)\n\n      if (indexEnd > list.length - 1 || (indexEnd < 0 && index < 0)) {\n        return\n      } else if (indexEnd <= 0 && index >= 0) {\n        indexEnd = index\n      }\n\n      const listMiddle = []\n      // Create middle of array with new group items\n      for (let i = 0; i < length; i++) {\n        listMiddle.push(list[items[i]])\n      }\n\n      items.sort((a, b) => a - b)\n      const startList = list\n      let offset = 1\n      // Remove moved items\n      for (let i = 0; i < length; i++) {\n        startList.splice(items[i], 1)\n\n        const nextIndex = i + 1\n        if (nextIndex < length) {\n          items[nextIndex] = items[nextIndex] - offset\n          ++offset\n        }\n      }\n      // Create end of array\n      const listEnd = startList.splice(indexEnd)\n\n      return startList.concat(listMiddle, listEnd)\n    },\n    /**\n     * Merge items into array with the option to flatten\n     * @param {Object} arrayMerge - The Object containing the data to merge items into an array\n     * @param {array} arrayMerge.list - The source array\n     * @param {Object[]} arrayMerge.items - An array of objects which contains the item and position it should be placed into the array\n     * @param {*} arrayMerge.items[].value - The value to be merged into the original array\n     * @param {number} arrayMerge.items[]._$index - The index the value will be placed into the original array\n     * @param {number} arrayMerge.flat - Flatten height\n     * @returns {Array} - A new list\n     */\n    arrayMerge ({ list, items, flat }) {\n      let offset = 0\n      items.sort((a, b) => a._$index - b._$index)\n\n      for (let i = 0; i < items.length; i++) {\n        const item = items[i]\n        const index = item._$index + offset\n        delete item._$index\n        const listMiddle = [item]\n        const listEnd = list.splice(index)\n        list = list.concat(listMiddle, listEnd)\n        ++offset\n      }\n\n      if (flat) {\n        list = list.flat(flat)\n      }\n\n      return list\n    }\n  }\n}\n","import { name, version } from '../ds.plugin.config'\n\n/**\n * Dooksa event plugin.\n * @module plugin\n */\nexport default {\n  name,\n  version,\n  dependencies: [\n    {\n      name: 'dsAction',\n      version: 1\n    }\n  ],\n  data: {\n    items: {}\n  },\n  methods: {\n    addListener (context, { id, name, payload }) {\n      name = context.name + '/' + name\n\n      if (this.items[id]) {\n        if (this.items[id][name]) {\n          this.items[id][name].push(payload)\n        } else {\n          this.items[id][name] = [payload]\n        }\n      } else {\n        this.items[id] = {\n          [name]: [payload]\n        }\n      }\n    },\n    emit (context, { id, name, payload }) {\n      const actions = this._listener(id, context.name + '/' + name)\n      console.log(id, name, payload)\n      for (let i = 0; i < actions.length; i++) {\n        this.$action('dsAction/dispatch', { id: actions[i], payload })\n      }\n    },\n    removeListener (context, { id, name, value }) {\n      if (this.items[id]) {\n        name = context.name + '/' + name\n\n        if (this.items[id][name]) {\n          const items = this.items[id][name]\n          const list = []\n\n          for (let i = 0; i < items.length; i++) {\n            if (items[i] !== value) {\n              list.push(items[i])\n            }\n          }\n\n          if (!list.length) {\n            delete this.items[id][name]\n          } else {\n            this.items[id][name] = list\n          }\n        }\n      }\n    },\n    _listener (id, name) {\n      if (this.items[id]) {\n        return this.items[id][name] ? [...this.items[id][name]] : []\n      }\n\n      return []\n    }\n  }\n}\n","import { name, version } from '../ds.plugin.config'\n\nexport default {\n  name,\n  version,\n  data: {\n    params: {},\n    usedBy: {},\n    instance: {}\n  },\n  methods: {\n    process ({\n      id,\n      itemId,\n      parentItemId,\n      paramType,\n      params,\n      data,\n      results,\n      variables,\n      lastItem,\n      debug\n    }) {\n      if (debug) {\n        debugger\n      }\n\n      const config = { id, itemId, parentItemId }\n\n      if (!this.instance[id]) {\n        this.instance[id] = {\n          data: {},\n          iteration: {},\n          variables: {},\n          results: {}\n        }\n      }\n\n      if (data) {\n        this.instance[id].data = data\n      }\n\n      if (results) {\n        this.instance[id].results[parentItemId] = results\n      }\n\n      if (variables) {\n        variables = this._processVariables(variables, config)\n\n        this.instance[id].variables = {\n          ...this.instance[id].variables,\n          ...variables\n        }\n      }\n\n      const result = this['_data/' + paramType](params, config)\n\n      if (lastItem) {\n        delete this.instance[id]\n      }\n\n      return result\n    },\n    setParams ({ id, item, usedBy }) {\n      this.params[id] = item\n    },\n    _getParam (item, instanceId) {\n      if (item._$id) {\n        return this.params[item._$id]\n      }\n\n      return item\n    },\n    _get (item, config) {\n      if (!item._$computed &&\n        !item._$computedParams &&\n        !item._$id) {\n        return item\n      }\n\n      item = this._getParam(item, config.id)\n\n      if (item._$computedParams) {\n        return this.process({ ...item, ...config })\n      }\n\n      return this['_' + item.name](\n        this._getParam(item.params, config.id),\n        config\n      )\n    },\n    _getValue (item, data) {\n      if (Object.hasOwnProperty.call(data, item)) {\n        return data[item]\n      }\n\n      if (Object.hasOwnProperty.call(item, 'value')) {\n        return data\n      }\n\n      if (Object.hasOwnProperty.call(item, 'key')) {\n        const key = item.key\n        const dotNotations = key.split('.')\n        let result = { ...data }\n\n        for (let i = 0; i < dotNotations.length; i++) {\n          const key = dotNotations[i]\n\n          if (Object.hasOwnProperty.call(data, key)) {\n            result = data[key]\n          } else {\n            return result\n          }\n        }\n\n        return result\n      }\n\n      if (Object.hasOwnProperty.call(item, 'index')) {\n        return data[item.index]\n      }\n\n      if (Object.hasOwnProperty.call(item, 'indexes')) {\n        const result = []\n\n        for (let i = 0; i < item.indexes.length; i++) {\n          const index = item[i]\n\n          result.push(data[index])\n        }\n\n        return result\n      }\n\n      const result = {}\n\n      for (let i = 0; i < item.length; i++) {\n        const key = item[i]\n        result[key] = data[key]\n      }\n\n      return result\n    },\n    _getVariable (item, config) {\n      const variable = this.instance[config.id].variables[item]\n\n      if (variable) {\n        if (Array.isArray(variable)) {\n          return [...variable]\n        } else if (typeof variable === 'object') {\n          return { ...variable }\n        } else {\n          return variable\n        }\n      }\n    },\n    _arrayTransform (item, config) {\n      const map = item.map\n      const flat = item.flat\n      let results = []\n      let list = item.list\n\n      if (list._$computed) {\n        list = this._get(list, config)\n      }\n\n      for (let index = 0; index < list.length; index++) {\n        const listItem = list[index]\n        const mapItems = []\n\n        for (let i = 0; i < map.length; i++) {\n          const mapItem = {}\n\n          for (let j = 0; j < map[i].length; j++) {\n            const k = map[i][j][0]\n            const v = map[i][j][1]\n\n            if (listItem[v]) {\n              mapItem[k] = listItem[v]\n            } else if (Object.hasOwnProperty.call(v, 'value')) {\n              mapItem[k] = v.value\n            } else if (Object.hasOwnProperty.call(v, 'key')) {\n              const key = v.key\n              const dotNotation = key.split('.')\n              let result = listItem\n\n              for (let i = 0; i < dotNotation.length; i++) {\n                const dKey = dotNotation[i]\n\n                if (result[dKey]) {\n                  result = result[dKey]\n                }\n              }\n\n              mapItem[k] = result\n            } else if (Object.hasOwnProperty.call(v, 'index')) {\n              mapItem[k] = index\n            } else {\n              this.instance[config.id].iteration = {\n                ...listItem,\n                _$index: index\n              }\n\n              mapItem[k] = this._get(v, config)\n            }\n          }\n\n          if (item.onIteration) {\n            this.instance[config.id].iteration = {\n              ...mapItem,\n              _$index: index\n            }\n\n            this.$context.method('dsWorkflow/rules', {\n              ...item.onIteration,\n              id: config.id,\n              itemId: config.itemId,\n              parentItemId: config.parentItemId\n            })\n          }\n\n          mapItems.push(mapItem)\n        }\n\n        results.push(mapItems)\n      }\n\n      if (flat) {\n        results = results.flat(flat)\n      }\n\n      return results\n    },\n    _eval (expression, config, result) {\n      for (let i = 0; i < expression.length; i++) {\n        const item = expression[i]\n        const values = this._processValues(item.values, config)\n\n        result += this.$context.method('dsOperators/eval', { name: item.name, values })\n      }\n\n      return result\n    },\n    _evalBoolean (expression, config) {\n      return !!this._eval(expression, config, false)\n    },\n    _evalNumber (expression, config) {\n      return this._eval(expression, config, 0)\n    },\n    _evalString (expression, config) {\n      return this._eval(expression, config, '')\n    },\n    _processValues (values, config) {\n      const result = []\n\n      for (let i = 0; i < values.length; i++) {\n        const item = values[i]\n\n        if (item.value) {\n          result.push(item.value)\n        } else {\n          result.push(this._get(item, config))\n        }\n      }\n\n      return result\n    },\n    _processVariables (variables, config) {\n      const result = {}\n\n      for (let i = 0; i < variables.length; i++) {\n        const key = variables[i][0]\n        const item = variables[i][1]\n\n        if (item.value) {\n          result[key] = item.value\n        } else {\n          result[key] = this._get(item, config)\n        }\n      }\n\n      return result\n    },\n    '_getter/app/state' (item, config) {\n      let params\n\n      if (item.params) {\n        params = this._get(item.params, config)\n      }\n\n      const result = this.$context.store.getters[item.name](params)\n\n      if (item.return) {\n        return this._getValue(item.return, result)\n      }\n\n      return result\n    },\n    '_getter/plugin/method' (item, config) {\n      let params\n\n      if (item.params) {\n        params = this._get(this._getParam(item.params, config.id), config)\n      }\n\n      const result = this.$context.method(item.name, params)\n\n      if (item.return) {\n        return this._getValue(item.return, result)\n      }\n\n      return result\n    },\n    '_getter/this/id' (item, { id }) {\n      return this.instance[id].data.id\n    },\n    '_getter/this/instanceId' (item, { id }) {\n      return this.instance[id].data.instanceId\n    },\n    '_getter/this/value' (item, { id }) {\n      const data = this.instance[id].data.value\n\n      if (item) {\n        return this._getValue(item, { ...data })\n      }\n\n      return data\n    },\n    '_getter/iteration/value' (item, { id }) {\n      const data = this.instance[id].iteration\n\n      if (item) {\n        return this._getValue(item, { ...data })\n      }\n\n      return data\n    },\n    '_getter/parent/value' (item, { id, parentItemId }) {\n      if (item._$itemId) {\n        parentItemId = item._$itemId\n      }\n\n      const data = this.instance[id].results[parentItemId]\n\n      if (Object.hasOwnProperty.call(data, item)) {\n        return data[item]\n      }\n\n      if (Object.hasOwnProperty.call(item, 'value')) {\n        return data\n      }\n\n      if (Object.hasOwnProperty.call(item, 'key')) {\n        const key = item.key\n        const dotNotations = key.split('.')\n        let result = data\n\n        for (let i = 0; i < dotNotations.length; i++) {\n          const key = dotNotations[i]\n\n          if (result[key]) {\n            result = result[key]\n          } else {\n            return result\n          }\n        }\n      }\n    },\n    '_getter/parent/array' (item, { id, parentItemId }) {\n      const result = []\n\n      if (item._$itemId) {\n        parentItemId = item._$itemId\n      }\n\n      const data = this.instance[id].results[parentItemId]\n\n      for (let i = 0; i < item.indexes.length; i++) {\n        const index = item[i]\n\n        result.push(data[index])\n      }\n\n      return result\n    },\n    '_getter/parent/object' (item, { id, parentItemId }) {\n      const results = {}\n\n      if (item._$itemId) {\n        parentItemId = item._$itemId\n      }\n\n      const data = this.instance[id].results[parentItemId]\n\n      for (let i = 0; i < item.keys.length; i++) {\n        const key = item[i]\n        const dotNotations = key.split('.')\n        let result = data\n\n        for (let i = 0; i < dotNotations.length; i++) {\n          const key = dotNotations[i]\n\n          if (result[key]) {\n            result = result[key]\n          }\n        }\n\n        results[key] = result\n      }\n\n      return results\n    },\n    '_data/array' (params, config) {\n      const result = []\n\n      for (let i = 0; i < params.length; i++) {\n        result.push(this._get(params[i], config))\n      }\n\n      return result\n    },\n    '_data/object' (params, config) {\n      const result = {}\n\n      for (let i = 0; i < params.length; i++) {\n        const item = params[i]\n\n        result[item[0]] = this._get(item[1], config)\n      }\n\n      return result\n    },\n    '_data/value' (params, config) {\n      return this._get(params, config)\n    }\n  }\n}\n","// This file replaces `index.js` in bundlers like webpack or Rollup,\n// according to `browser` config in `package.json`.\n\nimport { urlAlphabet } from './url-alphabet/index.js'\n\nif (false) {\n  // All bundlers will remove this block in the production bundle.\n  if (\n    typeof navigator !== 'undefined' &&\n    navigator.product === 'ReactNative' &&\n    typeof crypto === 'undefined'\n  ) {\n    throw new Error(\n      'React Native does not have a built-in secure random generator. ' +\n        'If you don’t need unpredictable IDs use `nanoid/non-secure`. ' +\n        'For secure IDs, import `react-native-get-random-values` ' +\n        'before Nano ID.'\n    )\n  }\n  if (typeof msCrypto !== 'undefined' && typeof crypto === 'undefined') {\n    throw new Error(\n      'Import file with `if (!window.crypto) window.crypto = window.msCrypto`' +\n        ' before importing Nano ID to fix IE 11 support'\n    )\n  }\n  if (typeof crypto === 'undefined') {\n    throw new Error(\n      'Your browser does not have secure random generator. ' +\n        'If you don’t need unpredictable IDs, you can use nanoid/non-secure.'\n    )\n  }\n}\n\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\n\nlet customRandom = (alphabet, size, getRandom) => {\n  // First, a bitmask is necessary to generate the ID. The bitmask makes bytes\n  // values closer to the alphabet size. The bitmask calculates the closest\n  // `2^31 - 1` number, which exceeds the alphabet size.\n  // For example, the bitmask for the alphabet size 30 is 31 (00011111).\n  // `Math.clz32` is not used, because it is not available in browsers.\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  // Though, the bitmask solution is not perfect since the bytes exceeding\n  // the alphabet size are refused. Therefore, to reliably generate the ID,\n  // the random bytes redundancy has to be satisfied.\n\n  // Note: every hardware random generator call is performance expensive,\n  // because the system call for entropy collection takes a lot of time.\n  // So, to avoid additional system calls, extra bytes are requested in advance.\n\n  // Next, a step determines how many random bytes to generate.\n  // The number of random bytes gets decided upon the ID size, mask,\n  // alphabet size, and magic number 1.6 (using 1.6 peaks at performance\n  // according to benchmarks).\n\n  // `-~f => Math.ceil(f)` if f is a float\n  // `-~i => i + 1` if i is an integer\n  let step = -~((1.6 * mask * size) / alphabet.length)\n\n  return () => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      // A compact alternative for `for (var i = 0; i < step; i++)`.\n      let j = step\n      while (j--) {\n        // Adding `|| ''` refuses a random byte that exceeds the alphabet size.\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\n\nlet customAlphabet = (alphabet, size) => customRandom(alphabet, size, random)\n\nlet nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array(size))\n\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  while (size--) {\n    // It is incorrect to use bytes exceeding the alphabet size.\n    // The following mask reduces the random byte in the 0-255 value\n    // range to the 0-63 value range. Therefore, adding hacks, such\n    // as empty string fallback or magic numbers, is unneccessary because\n    // the bitmask trims bytes down to the alphabet size.\n    let byte = bytes[size] & 63\n    if (byte < 36) {\n      // `0-9a-z`\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      // `A-Z`\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte < 63) {\n      id += '_'\n    } else {\n      id += '-'\n    }\n  }\n  return id\n}\n\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","import { name, version } from '../ds.plugin.config'\n// ISSUE: [DS-599] use script loader if nano id are not needed for page rendering\nimport { customAlphabet } from 'nanoid'\n\nexport default {\n  name,\n  version,\n  data: {\n    docId: null,\n    instanceId: null\n  },\n  setup ({ docId, instanceId }) {\n    this.docId = customAlphabet(docId.alphabet, docId.alphabetLength)\n    this.instanceId = customAlphabet(instanceId.alphabet, instanceId.alphabetLength)\n  },\n  getters: {\n    /**\n     * Generate firebase UUID\n     */\n    generateDocId () {\n      return this.docId()\n    },\n    /**\n     * Generate ds instance UUID\n     */\n    generateInstanceId () {\n      return this.instanceId()\n    }\n  }\n}\n","/**\n * @classdesc Plugins are used to extend and customise the Dooksa application builder.\n * @class\n * @param {Object} plugin - The plugin object used by the Plugin constructor.\n * @param {string} plugin.name - The name of the plugin.\n * @param {number} plugin.version - The version of the plugin.\n * @param {Object[]} plugin.dependencies - List of dependent plugins, e.g. if this plugin x used y by running an action: x.$action('y', params).\n * @param {string} plugin.dependencies[].name - The name of the dependent plugin.\n * @param {number} plugin.dependencies[].version - The version of the dependent plugin.\n * @param {Object} plugin.setup - This .\n * @param {Object.<string, (number|boolean|string|array|object)>} plugin.data - The object that contains plugins data.\n * @param {Object.<string, object>} plugin.getters - The version of the plugin.\n * @param {Object.<string, object>} plugin.methods - The version of the plugin.\n * @param {Object[]} context - Context is shared data between plugins.\n * @param {string} context.name - The name will be the key used within the plugin, e.g. '$action' = this.$action\n * @param {number} context.dispatch - If true the context.value (function) return value will be used.\n * @param {(string|object)} context.value - The value of the context.\n */\nfunction Plugin (plugin, context = []) {\n  this.name = plugin.name\n  this.version = plugin.version\n  this._context = {}\n  // set data to context\n  if (plugin.data) {\n    this._context = { ...plugin.data }\n  }\n  // set context to plugin\n  for (let i = 0; i < context.length; i++) {\n    const item = context[i]\n    const pluginMetadata = {\n      name: plugin.name,\n      version: plugin.version,\n      dependencies: plugin.dependencies\n    }\n\n    if (item.dispatch) {\n      this._context[item.name] = item.value(pluginMetadata)\n    } else {\n      this._context[item.name] = item.value\n    }\n  }\n  // set dependencies\n  if (plugin.dependencies) {\n    this.dependencies = plugin.dependencies\n  }\n  // set getters\n  if (plugin.getters) {\n    const getters = {}\n\n    for (const key in plugin.getters) {\n      if (Object.hasOwnProperty.call(plugin.getters, key)) {\n        const item = plugin.getters[key]\n        // Add getter\n        Object.defineProperty(this._context, key, { get: item })\n        // Catch the public getter\n        if (key.charAt(0) !== '_') {\n          getters[key] = item.bind(this._context)\n        }\n      }\n    }\n\n    this.getters = getters\n  }\n  // set methods\n  if (plugin.methods) {\n    const methods = {}\n\n    for (const key in plugin.methods) {\n      if (Object.hasOwnProperty.call(plugin.methods, key)) {\n        const item = plugin.methods[key]\n\n        this._context[key] = item\n\n        // Catch the public method\n        if (key.charAt(0) !== '_') {\n          methods[key] = item.bind(this._context)\n        }\n      }\n    }\n\n    this.methods = methods\n  }\n  // set setup function\n  if (plugin.setup) {\n    this.setup = plugin.setup.bind(this._context)\n  }\n}\n\n/**\n * Runs the setup function within the plugin if present, this function is intended to be used by the parent plugin\n * @param {Object, <string, (number|boolean|string|array|object)>} params - These are the parameters required by the setup function\n * @returns {(number|boolean|string|array|object)}\n */\nPlugin.prototype.init = function (params) {\n  if (this.setup) {\n    return this.setup(params)\n  }\n}\n\nexport default Plugin\n","function ScriptLoader ({\n  id,\n  async,\n  crossOrigin,\n  defer,\n  integrity,\n  nonce,\n  referrerPolicy,\n  src,\n  type = 'text/javascript',\n  nomodule,\n  customParams = [],\n  globalVars\n}) {\n  this.queue = []\n  this.loaded = false\n  this.id = `sl__${id}`\n  this.async = async\n  this.crossOrigin = crossOrigin\n  this.defer = defer\n  this.integrity = integrity\n  this.nonce = nonce\n  this.referrerPolicy = referrerPolicy\n  this.src = src\n  this.type = type\n  this.nomodule = nomodule\n  this.customParams = customParams\n  this.globalVars = globalVars\n}\n\nScriptLoader.prototype.loading = function () {\n  return Promise.all(this.queue)  \n}\n\nScriptLoader.prototype.load = function (config) {\n  const loadScript = new Promise((resolve, reject) => {\n    const url = this.createUrl(config)\n\n    this.setScript({ url, resolve, reject })\n  })\n\n  this.queue.push(loadScript)\n\n  return loadScript\n}\n\nScriptLoader.prototype.createUrl = function (config) {\n  let url = this.src\n\n  for (let i = 0; i < this.customParams.length; i++) {\n    const paramKey = this.customParams[i]\n\n    url = url.replace(`${paramKey}=`, `${paramKey}=${config[paramKey]}`)\n  }\n\n  return url\n}\n\nScriptLoader.prototype.setScript = function ({ url, resolve, reject }) {\n  if (document.getElementById(this.id)) {\n    return\n  }\n\n  const script = document.createElement('script')\n\n  script.id = this.id\n  script.type = this.type\n  script.src = url\n  script.onerror = () => reject()\n  script.onload = () => {\n    this.loaded = true\n    const result = {}\n\n    if (this.globalVars) {\n      for (let i = 0; i < this.globalVars.length; i++) {\n        const globalVar = this.globalVars[i]\n        result[globalVar] = window[globalVar]\n      }\n    }\n\n    resolve(result)\n  }\n\n  if (this.async) {\n    script.async = this.async\n  }\n\n  if (this.crossOrigin) {\n    script.crossOrigin = this.crossOrigin\n  }\n\n  if (this.defer) {\n    script.defer = this.defer\n  }\n\n  if (this.integrity) {\n    script.integrity = this.integrity\n  }\n\n  if (this.referrerPolicy) {\n    script.referrerPolicy = this.referrerPolicy\n  }\n\n  if (this.nomodule) {\n    script.nomodule = this.nomodule\n  }\n\n  if (this.nonce) {\n    script.nonce = this.nonce\n  }\n\n  document.head.appendChild(script)\n}\n\nexport default ScriptLoader\n","import { name, version } from '../ds.plugin.config'\nimport DsPlugin from '../../ds-plugins'\nimport ScriptLoader from '@dooksa/script-loader'\n\n/**\n * Ds plugin manager\n * @module plugin\n */\nexport default {\n  name,\n  version,\n  data: {\n    _methods: {},\n    _getters: {},\n    buildId: '',\n    additionalPlugins: {},\n    plugins: {},\n    appBuildId: '',\n    appPlugins: [],\n    appAdditionalPlugins: [],\n    queue: {},\n    isLoaded: {},\n    setupOnRequest: {},\n    setupOnRequestQueue: {},\n    metadata: {},\n    context: {}\n  },\n  setup ({\n    buildId,\n    plugins = [],\n    additionalPlugins = [],\n    isDev\n  }) {\n    this.buildId = buildId\n    this.context = [\n      {\n        name: 'isDev',\n        dispatch: false,\n        value: isDev\n      },\n      {\n        name: '$Script',\n        dispatch: false,\n        value: ScriptLoader // replace with ds-plugin-element\n      },\n      {\n        name: '$action',\n        dispatch: true,\n        value: this._action.bind(this)\n      },\n      {\n        name: '$method',\n        dispatch: true,\n        value: this._method.bind(this)\n      },\n      {\n        name: '$getter',\n        dispatch: false,\n        value: this._getter.bind(this)\n      }\n    ]\n\n    this._add({\n      name,\n      methods: {\n        use: this.use\n      }\n    })\n\n    this.isLoaded[name] = true\n\n    for (let i = 0; i < plugins.length; i++) {\n      const data = plugins[i]\n\n      this.plugins[data.item.name] = data.item.version\n      this.use({}, data)\n    }\n\n    for (let i = 0; i < additionalPlugins.length; i++) {\n      const data = additionalPlugins[i]\n\n      this.additionalPlugins[data.item.name] = data.item.version\n      this.use({}, data)\n    }\n  },\n  methods: {\n    _actionExists (name) {\n      return (this._methods[name])\n    },\n    _addMetadata (data) {\n      if (this.queue[data.name]) {\n        delete this.queue[data.name]\n      }\n\n      this.isLoaded[data.name] = false\n      this.metadata[data.name] = data\n    },\n    _callbackWhenAvailable (name, callback) {\n      if (this._actionExists(name)) {\n        return callback()\n      }\n\n      const nameSplit = name.split('/')\n      const baseName = nameSplit[0]\n\n      if (this.queue[baseName] && !this.setupOnRequest[baseName]) {\n        this._isLoading(baseName).then(() => {\n          if (this._actionExists(name)) {\n            callback()\n          } else {\n            console.error('action does not exist: ' + name)\n          }\n        })\n      } else if (this.setupOnRequest[baseName]) {\n        this._isLoading(baseName).then(() => {\n          this.use({}, { item: { name: baseName } }).then(() => {\n            if (this._actionExists(name)) {\n              callback()\n            } else {\n              console.error('action does not exist: ' + name)\n            }\n          })\n        })\n      } else if (this.metadata[baseName]) {\n        this.use({}, { item: { name: baseName } }).then(() => {\n          if (this._actionExists(name)) {\n            callback()\n          } else {\n            console.error('action does not exist: ' + name)\n          }\n        })\n      } else {\n        console.error('action does not exist: ' + name)\n      }\n    },\n    _install (name, pluginImport, setupOnRequest) {\n      return new Promise((resolve, reject) => {\n        this.isLoaded[name] = false\n        this.setupOnRequest[name] = !!setupOnRequest\n\n        this._load(name, pluginImport)\n          .then(({ plugin, setupOptions }) => {\n            const queue = []\n\n            if (setupOnRequest) {\n              this.setupOnRequestQueue[name] = plugin\n\n              return resolve()\n            } else if (plugin.dependencies) {\n              const depQueue = []\n\n              for (let i = 0; i < plugin.dependencies.length; i++) {\n                const depPlugin = this.use({}, {\n                  item: {\n                    name: plugin.dependencies[i].name,\n                    version: plugin.dependencies[i].version\n                  }\n                })\n\n                depQueue.push(depPlugin)\n              }\n\n              // wait for all dependencies to load\n              Promise.all(depQueue)\n                .then(() => {\n                  const dsPlugin = new DsPlugin(plugin, this.context)\n                  const setup = this._setup(dsPlugin, setupOptions)\n\n                  if (setup) {\n                    queue.push(setup)\n                  }\n\n                  // wait for plugin to setup\n                  Promise.all(queue)\n                    .then(() => {\n                      this._add(dsPlugin)\n                      this.isLoaded[name] = true\n\n                      resolve()\n                    })\n                    .catch(e => reject(e))\n                })\n                .catch(e => reject(e))\n            } else {\n              const dsPlugin = new DsPlugin(plugin, this.context)\n              const setup = this._setup(dsPlugin, setupOptions)\n\n              if (setup) {\n                queue.push(setup)\n              }\n\n              // wait for plugin to setup\n              Promise.all(queue)\n                .then(() => {\n                  this._add(dsPlugin)\n                  this.isLoaded[name] = true\n\n                  resolve()\n                })\n                .catch(e => reject(e))\n            }\n          })\n          .catch(e => reject(e))\n      })\n    },\n    _isLoading (name) {\n      return Promise.all(this.queue[name])\n    },\n    _load (name, plugin) {\n      return new Promise((resolve, reject) => {\n        let setupOptions = {}\n        let scriptOptions = {\n          id: name\n        }\n\n        if (this.metadata[name]) {\n          const metadata = this.metadata[name]\n\n          if (!metadata) {\n            const error = { statusCode: 404, message: 'Plugin not found: ' + name }\n            reject(error)\n          }\n\n          if (metadata.script) {\n            scriptOptions = { ...scriptOptions, ...metadata.script }\n          }\n\n          if (metadata.setupOptions) {\n            setupOptions = metadata.setupOptions\n          }\n        }\n\n        if (plugin) {\n          return resolve({ plugin, setupOptions })\n        } else if (this.setupOnRequestQueue[name]) {\n          plugin = this.setupOnRequestQueue[name]\n          delete this.setupOnRequestQueue[name]\n\n          return resolve({ plugin, setupOptions })\n        }\n\n        if (scriptOptions.src) {\n          const script = new ScriptLoader(scriptOptions)\n\n          script.load()\n            .then(() => {\n              const plugin = window.pluginLoader[name]\n\n              if (plugin) {\n                return resolve({ plugin, setupOptions })\n              } else {\n                const error = new Error('Plugin was not found: ' + name)\n\n                return reject(error)\n              }\n            })\n            .catch(error => reject(error))\n        } else {\n          const error = { statusCode: 404, message: 'Plugin not found: ' + name }\n\n          reject(error)\n        }\n      })\n    },\n    _action (context) {\n      return (name, params, callback = {}) => {\n        this._callbackWhenAvailable(name, () => {\n          const onSuccess = callback.onSuccess\n          const onError = callback.onError\n          const pluginResult = this._methods[name](context, params)\n\n          if (onError && pluginResult instanceof Error) {\n            if (onError.method) {\n              onError.method({ ...onError.params, results: pluginResult })\n            } else {\n              onError(pluginResult)\n            }\n          } else if (pluginResult instanceof Promise) {\n            Promise.resolve(pluginResult)\n              .then(results => {\n                if (onSuccess) {\n                  if (onSuccess.method) {\n                    onSuccess.method({ ...onSuccess.params, results })\n                  } else {\n                    onSuccess(results)\n                  }\n                }\n              })\n              .catch(error => {\n                if (onError) {\n                  if (onError.method) {\n                    onError.method({ ...onError.params, results: error })\n                  } else {\n                    onError(error)\n                  }\n                }\n              })\n          } else if (onSuccess) {\n            if (onSuccess.method) {\n              onSuccess.method({ ...onSuccess.params, results: pluginResult })\n            } else {\n              onSuccess(pluginResult)\n            }\n          }\n        })\n      }\n    },\n    _setup (plugin, options) {\n      const setup = plugin.init(options)\n\n      if (setup instanceof Promise) {\n        return setup\n      }\n    },\n    _add (plugin) {\n      if (plugin.methods) {\n        for (const key in plugin.methods) {\n          if (Object.hasOwnProperty.call(plugin.methods, key)) {\n            const method = plugin.methods[key]\n\n            this._methods[`${plugin.name}/${key}`] = method\n          }\n        }\n      }\n\n      if (plugin.getters) {\n        for (const key in plugin.getters) {\n          if (Object.hasOwnProperty.call(plugin.getters, key)) {\n            const getter = plugin.getters[key]\n            Object.defineProperty(this._getters, `${plugin.name}/${key}`, { get: getter })\n          }\n        }\n      }\n    },\n    _getter (name) {\n      return this._getters[name]\n    },\n    _method (context) {\n      return (name, params) => {\n        try {\n          if (this._methods[name]) {\n            return this._methods[name](context, params)\n          } else {\n            // Check if the plugin needs to run setup\n            throw new Error('Method \"' + name + '\" does not exist')\n          }\n        } catch (error) {\n          return error\n        }\n      }\n    },\n    use (context, { item, options = {}, plugin }) {\n      if (options.onDemand) {\n        return this._addMetadata(item)\n      }\n\n      if (this.isLoaded[item.name]) {\n        return Promise.resolve()\n      } else if (this.queue[item.name] && !this.setupOnRequest[item.name]) {\n        return this._isLoading(item.name)\n      } else {\n        this._addMetadata(item)\n        const loadingPlugin = this._install(item.name, plugin, options.setupOnRequest)\n        this.queue[item.name] = [loadingPlugin]\n      }\n    }\n  }\n}\n","import { name, version } from '../ds.plugin.config'\n\n/**\n * Ds Plugin.\n * @module plugin\n */\n\nexport default {\n  name,\n  version,\n  dependencies: [\n    {\n      name: 'dsElement',\n      version: 1\n    },\n    {\n      name: 'dsContent',\n      version: 1\n    },\n    {\n      name: 'dsLayout',\n      version: 1\n    }\n  ],\n  data: {\n    rootElement: null\n  },\n  setup ({ rootElement, assetsURL }) {\n    this.rootElement = rootElement\n    // Cached file name for current path\n    const pathFilename = window.location.pathname.replace('/', '-') + '.js'\n    // Fetch cache json page if available\n    const script = new this.$Script({\n      id: 'ds-app-cache',\n      src: assetsURL + '/app_cache/' + window.location.hostname + '/' + pathFilename,\n      globalVars: ['dsAppCache']\n    })\n\n    script.load()\n      .then(({ dsAppCache }) => {\n        if (dsAppCache.content) {\n          this.$method('dsContent/set', dsAppCache.content.items)\n        }\n\n        if (dsAppCache.widgets.content) {\n          this.$method('dsLayout/setContent', dsAppCache.widgets.content)\n        }\n\n        if (dsAppCache.widgets.children) {\n          this.$method('dsLayout/setChildren', dsAppCache.widgets.children)\n        }\n\n        if (dsAppCache.widgets.layout) {\n          this.$method('dsLayout/setLayout', dsAppCache.widgets.layout)\n        }\n\n        if (dsAppCache.widgets.baseItems) {\n          this.$method('dsLayout/setBaseItems', dsAppCache.widgets.baseItems)\n        }\n\n        for (let i = 0; i < 30; i++) {\n          const component = this.$method('dsLayout/create', 'layoutDocId_1')\n          this.rootElement.appendChild(component)\n        }\n\n        rootElement.classList.remove('loading')\n      })\n      .catch(e => console.error(e))\n  }\n}\n","import DsPlugin from '@dooksa/ds-plugin'\nimport dsAction from '../../ds-plugin-action'\nimport dsLayout from '../../ds-plugin-layout'\nimport dsElement from '../../ds-plugin-element'\nimport dsContent from '../../ds-plugin-content'\nimport dsOperators from '../../ds-plugin-operators'\nimport dsEvent from '../../ds-plugin-event'\nimport dsParameters from '../../ds-plugin-params'\nimport dsUtilities from '../../ds-plugin-utilities'\nimport dsManager from '../../ds-plugin-manager'\nimport dsApp from '../src/app'\n\n// Core plugins\nconst plugins = [\n  {\n    item: {\n      name: dsLayout.name,\n      version: dsLayout.version\n    },\n    plugin: dsLayout,\n    options: {\n      setupOnRequest: false\n    }\n  },\n  {\n    item: {\n      name: dsElement.name,\n      version: dsElement.version\n    },\n    plugin: dsElement,\n    options: {\n      setupOnRequest: false\n    }\n  },\n  {\n    item: {\n      name: dsContent.name,\n      version: dsContent.version\n    },\n    plugin: dsContent,\n    options: {\n      setupOnRequest: false\n    }\n  },\n  {\n    item: {\n      name: dsAction.name,\n      version: dsAction.version\n    },\n    plugin: dsAction,\n    options: {\n      setupOnRequest: false\n    }\n  },\n  {\n    item: {\n      name: dsEvent.name,\n      version: dsEvent.version\n    },\n    plugin: dsEvent,\n    options: {\n      setupOnRequest: false\n    }\n  },\n  {\n    item: {\n      name: dsParameters.name,\n      version: dsParameters.version\n    },\n    plugin: dsParameters,\n    options: {\n      setupOnRequest: false\n    }\n  },\n  {\n    item: {\n      name: dsOperators.name,\n      version: dsOperators.version\n    },\n    plugin: dsOperators,\n    options: {\n      setupOnRequest: false\n    }\n  },\n  {\n    item: {\n      name: dsUtilities.name,\n      version: dsUtilities.version,\n      setupOptions: {\n        docId: {\n          alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz',\n          alphabetLength: 20\n        },\n        instanceId: {\n          alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz',\n          alphabetLength: 17\n        }\n      }\n    },\n    plugin: dsUtilities,\n    options: {\n      setupOnRequest: false\n    }\n  }\n]\n\nwindow.pluginLoader = {}\n\nplugins.push({\n  item: {\n    name: dsApp.name,\n    version: dsApp.version,\n    setupOptions: {\n      rootElement: document.getElementById('root'),\n      assetsURL: 'https://cdn.dooksa.com/file/dooksa'\n    }\n  },\n  plugin: dsApp,\n  options: {\n    setupOnRequest: false\n  }\n})\n\nconst pluginManager = new DsPlugin(dsManager)\n\npluginManager.init({\n  build: 1,\n  plugins,\n  isDev: true\n})\n"],"sourceRoot":""}
(()=>{var e={478:e=>{e.exports={name:"dsAction",filename:"ds-action",version:1}},249:(e,t,s)=>{const{hash:n}=s(245);e.exports={name:"dsContent",filename:"ds-content",version:1,integrity:n}},245:e=>{e.exports={hash:"sha512-z5UgOiTBL4qHC08JHij7jkWr88NaQCioZ76gtJZzzY0VNtu0rPTfHl1h5hGzledJT3FOv0b1ReNw7eLu+5au0w=="}},980:e=>{e.exports={name:"dsElement",filename:"ds-element",version:"1"}},258:e=>{e.exports={name:"dsEvent",filename:"ds-event",version:1}},155:e=>{e.exports={name:"dsManager",filename:"ds-plugin-manager",version:1}},616:e=>{e.exports={name:"dsOperators",filename:"ds-operators",version:"0.1.0"}},615:e=>{e.exports={name:"dsParameters",filename:"ds-parameters",version:1}},314:e=>{e.exports={name:"dsRouter",filename:"ds-router",version:1}},308:e=>{e.exports={name:"dsUtilities",filename:"ds-utilities",version:1}},265:e=>{e.exports={name:"dsWidget",filename:"ds-widget",version:1}},946:(e,t,s)=>{const{hash:n}=s(607);e.exports={name:"dsApp",filename:"ds-app",version:1,integrity:n}},607:e=>{e.exports={hash:"sha512-hkhD8NtPFiKheeJH+nk7SvMt+1e4KXqTzEHbvwRi6U3a2Jov1BY9RngE9Kf1+xW3bzjL65fDE/Uqy9wm6rOL7Q=="}}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,s),a.exports}s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};(()=>{"use strict";function e(e,t=[]){this.name=e.name,this.version=e.version,this._context={},e.data&&(this._context={...e.data});for(let s=0;s<t.length;s++){const n=t[s],i={name:e.name,version:e.version,dependencies:e.dependencies};n.dispatch?this._context[n.name]=n.value(i):this._context[n.name]=n.value}if(e.dependencies&&(this.dependencies=e.dependencies),e.methods){const t={};for(const s in e.methods)if(Object.hasOwnProperty.call(e.methods,s)){const n=e.methods[s];this._context[s]=n,"_"!==s.charAt(0)&&(t[s]=n.bind(this._context))}this.methods=t}e.setup&&(this.setup=e.setup.bind(this._context))}s.d(n,{default:()=>T}),e.prototype.init=function(e){if(this.setup)return this.setup(e)};var t=e,i=s(478),a={name:i.name,version:i.version,dependencies:[{name:"dsParameters",version:1}],data:{items:{},conditions:{},lastActionIndex:{}},methods:{dispatch(e,{id:t,data:s}){this._dispatch({root:!0,parentItemId:t,actions:this.items[t],conditions:this.conditions[t]||[],data:s})},_dispatch({root:e,instanceId:t,parentItemId:s,actions:n=[],conditions:i=[],data:a,results:r={}}){let o=!1,d=!0,h=!1;e&&(t=this.$method("dsUtilities/generateInstanceId"),this.lastActionIndex[t]=n.length-1),i.length&&(d=this._compare(i,{instanceId:this.$method("dsUtilities/generateInstanceId"),parentItemId:s,data:a}));for(let e=0;e<n.length;e++){const i=n[e],l=i.itemId,c=i.items[l];if(c.conditions&&(d=this._compare(c.conditions,{instanceId:this.$method("dsUtilities/generateInstanceId"),parentItemId:s,data:a})),Object.hasOwnProperty.call(c,"when")&&d!==c.when)return;if(Object.hasOwnProperty.call(c,"value"))return[c.value];const m={onSuccess:null,onError:null};Array.isArray(c.onSuccess)&&c.onSuccess.length&&(h=!0,m.onSuccess={params:{instanceId:t,parentItemId:l,actions:this._createActions(c.onSuccess,i),data:a},method:this._dispatch.bind(this)}),Array.isArray(c.onError)&&c.onSuccess.length&&(h=!0,m.onError={params:{id:t,parentItemId:l,actions:this._createActions(c.onError,i),data:a},method:this._dispatch.bind(this)}),e!==this.lastActionIndex[t]||h||(o=!0,delete this.lastActionIndex[t]);const u=this._action({instanceId:t,itemId:l,items:i.items,conditions:i.conditions,parentItemId:s,...c,callback:m,data:a,results:r,lastItem:o});u&&(r[l]=u)}return r},set(e,t={}){this.items={...this.items,...t}},setConditions(e,t={}){this.conditions={...this.conditions,...t}},_createActions(e,t){const s=[];for(let n=0;n<e.length;n++)s.push({itemId:e[n],items:t.items,params:t.params});return s},_action({instanceId:e,name:t,type:s,computedParams:n,paramType:i,paramItems:a,params:r,data:o,results:d,callback:h={},itemId:l,parentItemId:c,lastItem:m}){return n&&(r=this.$method("dsParameters/process",{id:e,itemId:l,parentItemId:c,paramType:i,params:r,paramItems:a,data:o,results:d,lastItem:m})),this["_"+s]({name:t,params:r,callback:h})},_onError(e,t,s){let n=s;t&&(n={...t,result:s}),e(n)},_onSuccess(e,t,s){let n=s;t&&(n={...t,results:s}),e(n)},_compare(e,{instanceId:t,parentItemId:s,data:n}){let i=!1,a=!1,r=[];for(let i=0;i<e.length;i++){const o=e[i],d=o.name;if("&&"===d||"||"===d)r=[...r,d],a=!0;else{const e=[],i=o.values.length-1;for(let a=0;a<o.values.length;a++){const r=o.values[a];let d=r.value;Object.hasOwnProperty.call(r,"itemId")&&(d=this._action({instanceId:t,itemId:r.itemId,parentItemId:s,paramItems:o.params,data:n,lastItem:i===a,...o.items[r.itemId]})),e.push(d)}const a=this.$method("dsOperators/eval",{name:d,values:e});r.push(a)}}if(a)i=this.$method("dsOperators/compare",r);else for(let e=0;e<r.length;e++)if(i=!0,!r[e]){i=!1;break}return i},_getProcessValue({params:e,callback:t}){const s=t.onSuccess,n=t.onError,i=e;return s&&this._onSuccess(s.method||s,s.params,i),n&&this._onError(n.method||n,n.params),i},_pluginAction({name:e,params:t,callback:s}){this.$action(e,t,s)},_pluginMethod({name:e,params:t,callback:s}){const n=s.onSuccess,i=this.$method(e,t);n&&this._onSuccess(n.method||n,n.params,i)}}},r=s(265),o={name:r.name,version:r.version,dependencies:[{name:"dsElement",version:1},{name:"dsContent",version:1}],data:{content:{},children:{},layout:{},baseItems:{},items:{},elements:{}},methods:{add(e,{id:t,instanceId:s,layout:n,content:i,children:a}){this.children[t]=a,this.layout[t]=n,this.content[s]=i},addBaseItem(e,{id:t,item:s}){this.baseItems[t]=s},create(e,{layoutId:t,instanceId:s}){if(!this.elements[s]){const e=this.layout[t],n=this.children[t];return this.elements[s]=this._render(t,s,e,n,e),this.elements[s]}return this.elements[s]},getElement(e,t){return this.elements[t]},getBaseItem(e,t){return this.baseItems[t]},getItem(e,t){return this.items[t]},setBaseItem(e,t={}){this.baseItems={...this.baseItems,...t}},setItem(e,t={}){this.items={...this.items,...t}},setChildren(e,t={}){this.children={...this.children,...t}},setContent(e,t={}){this.content={...this.content,...t}},setLayout(e,t={}){this.layout={...this.layout,...t}},_content(e,t){return this.content[e][t]},_render(e,t,s,n,i){const a=[];for(let r=0;r<n.length;r++){const o=i[n[r]];let d;if(o.component.elementId=o.component.elementId?o.component.elementId:t+"__"+r,d="element"===o.component.type?this.$method("dsElement/create",o.component):this.$method("dsElement/createNode",o.component.id),o.children){const n=this._sibling(e,s,o.children),i=this._render(e,t,s,n.children,n.items);if(o.contentIndex){const e=this._content(t,o.contentIndex);this.$method("dsContent/subscribe",{id:e.id,item:d})}for(let e=0;e<i.length;e++)d.appendChild(i[e])}else if(Object.hasOwnProperty.call(o,"contentIndex")){const e=this._content(t,o.contentIndex);this.$method("dsContent/subscribe",{id:e.id,item:d})}a.push(d)}return a},_sibling(e,t,s){const n={items:[],children:[]};for(let i=0;i<s.length;i++){const a=s[i],r=t[a];r.component.elementId=e+"__"+a,n.items.push(r),n.children.push(i)}return n}}},d=s(980),h={name:d.name,version:d.version,dependencies:[{name:"dsEvent",version:1}],data:{items:{dsAnchor:{is:"ds-a",tag:"a"},dsDiv:{is:"ds-div",tag:"div"},dsH1:{is:"ds-h1",tag:"h1"},dsH2:{is:"ds-h2",tag:"h2"},dsH3:{is:"ds-h3",tag:"h3"},dsH4:{is:"ds-h4",tag:"h4"},dsH5:{is:"ds-h5",tag:"h5"},dsH6:{is:"ds-h6",tag:"h6"},dsP:{is:"ds-p",tag:"p"},dsSpan:{is:"ds-span",tag:"span"},dsButton:{is:"ds-button",tag:"button"},dsImage:{is:"ds-image",tag:"img"},dsLabel:{is:"ds-label",tag:"label"},dsInput:{is:"ds-input",tag:"input"},dsTextarea:{is:"ds-textarea",tag:"textarea",attributes:{rows:"3"}},get dsText(){return new window.DsText},get dsFragment(){return new window.DocumentFragment}}},setup(){const e=e=>class extends e{constructor(){super(),this.elementId="",this.$action=()=>{}}connectedCallback(){this.$action("dsEvent/emit",{id:this.elementId,name:"mounted"})}disconnectedCallback(){this.$action("dsEvent/emit",{id:this.elementId,name:"unmounted"})}},t=e=>class extends e{get dsContent(){return this.textContent}set dsContent(e){this.textContent=e}},s=e=>class extends e{get dsContent(){return this.innerHTML}set dsContent(e){this.innerHTML=e}};class n extends(e(window.HTMLImageElement)){get dsContent(){return{src:this.src,alt:this.alt}}set dsContent(e){this.src=e.src,this.alt=e.alt||"",this.height=e.height||null,this.width=e.width||null}}class i extends(e(window.HTMLAnchorElement)){constructor(){super(),this.addEventListener("click",this.click.bind(this))}get dsContent(){return{href:this.href,pathname:this.pathname}}set dsContent(e){this.href=e.href}click(e){0!==e.button||"_self"===e.target.target||this.isModifiedEvent(e)||(e.preventDefault(),this.$action("dsRouter/navigate",e.target.pathname))}isModifiedEvent(e){return!!(e.getModifierState("Alt")||e.getModifierState("Control")||e.getModifierState("Meta")||e.getModifierState("Shift"))}}class a extends(s(e(window.HTMLDivElement))){}class r extends(s(e(window.HTMLSpanElement))){}class o extends(s(e(window.HTMLParagraphElement))){}class d extends(s(e(window.HTMLHeadingElement))){}class h extends(s(e(window.HTMLHeadingElement))){}class l extends(s(e(window.HTMLHeadingElement))){}class c extends(s(e(window.HTMLHeadingElement))){}class m extends(s(e(window.HTMLHeadingElement))){}class u extends(s(e(window.HTMLHeadingElement))){}class p extends(s(e(window.HTMLLabelElement))){}class g extends(t(window.Text)){}class v extends(s(e(window.HTMLButtonElement))){constructor(){super(),this.addEventListener("click",(e=>{this.$action("dsEvent/emit",{id:this.elementId,name:"click"})}))}}class f extends(e(window.HTMLInputElement)){constructor(){super(),this.addEventListener("input",(e=>{this.$action("dsEvent/emit",{id:this.elementId,name:"input",payload:e.target.value})}))}get dsContent(){return this.value}set dsContent(e){this.value=e}}class _ extends(t(e(window.HTMLTextAreaElement))){constructor(){super(),this.addEventListener("input",(e=>{this.$action("dsEvent/emit",{id:this.elementId,name:"input",payload:e.target.value})}))}}window.DsText=g,window.customElements.define("ds-a",i,{extends:"a"}),window.customElements.define("ds-span",r,{extends:"span"}),window.customElements.define("ds-image",n,{extends:"img"}),window.customElements.define("ds-h1",d,{extends:"h1"}),window.customElements.define("ds-h2",h,{extends:"h2"}),window.customElements.define("ds-h3",l,{extends:"h3"}),window.customElements.define("ds-h4",c,{extends:"h4"}),window.customElements.define("ds-h5",m,{extends:"h5"}),window.customElements.define("ds-h6",u,{extends:"h6"}),window.customElements.define("ds-p",o,{extends:"p"}),window.customElements.define("ds-div",a,{extends:"div"}),window.customElements.define("ds-button",v,{extends:"button"}),window.customElements.define("ds-input",f,{extends:"input"}),window.customElements.define("ds-label",p,{extends:"label"}),window.customElements.define("ds-textarea",_,{extends:"textarea"})},methods:{create(e,t){const s=this._getComponent(t.id),n=[];if(t.classList&&n.push(["class",t.classList.join(" ")]),t.attributes){s.attributes={...s.attributes,...t.attributes};for(const e in s.attributes)n.push([e,s.attributes[e]])}else if(s.attributes)for(const e in s.attributes)n.push([e,s.attributes[e]]);return this._createHTMLElement(t.elementId,s.tag,s.is,n)},createNode(e,t){return this.items[t]},_getComponent(e){return{...this.items[e]}},_createHTMLElement(e,t,s,n=[]){const i=document.createElement(t,{is:s});i.$action=this.$action,i.elementId=e;for(let e=0;e<n.length;e++)i.setAttribute(n[e][0],n[e][1]);return i}}},l=s(249),c={name:l.name,version:l.version,dependencies:[{name:"dsUtilities",version:1}],data:{items:{},observers:{},defaultItems:{text:{value:"",type:"text"},image:{value:{src:"",alt:""}},html:{type:"html",value:""}}},methods:{create(e,t){const s=[];for(let e=0;e<t.length;e++){const n=this.$method("dsUtilities/generateInstanceId"),i=t[e].type,a=this._generateContent(i,t[e].value);this.items[n]=a,s.push({id:n,type:i})}return s},remove(e,{id:t}){this.items[t]&&delete this.items[t]},set(e,t={}){this.items={...this.items,...t}},subscribe(e,{id:t,item:s}){this._getContent(t)&&this._setObserver(t,s)},unsubscribe(e,{id:t,item:s}){const n=this._getObservers(t),i=n.indexOf(s);i>-1&&n.splice(i,1)},update(e,{id:t,value:s}){const n=this._getContent(t);n&&(n.value=s,this._updateObservers(t,s))},_generateContent(e,t){const s={...this.defaultItems[e]};return t&&(s.value=t),s},_getContent(e){return this.items[e]},_setObserver(e,t){const s=this._getObservers(e),n=this._getContent(e);s.length?-1===s.indexOf(t)&&s.push(t):this.observers[e]=[t],this._updateObserver(e,t,n.value)},_getObservers(e){return this.observers[e]||[]},_updateObserver(e,t,s){const n=this._getObservers(e),i=n.indexOf(t);i>-1&&(n[i].dsContent=s)},_updateObservers(e,t){const s=this._getObservers(e);for(let e=0;e<s.length;e++)s[e].dsContent=t}}},m=s(616),u={name:m.name,version:m.version,data:{operators:{"==":e=>e[0]===e[1],"!=":e=>e[0]!==e[1],">":e=>e[0]>e[1],">=":e=>e[0]>=e[1],"<":e=>e[0]<e[1],"<=":e=>e[0]<=e[1],"!":e=>!e[0],"!!":e=>!!e[0],"%":e=>e[0]%e[1],"++x":e=>++e[0],"x++":e=>e[0]++,"--x":e=>--e[0],"x--":e=>e[0]--,"-":e=>e[0]-e[1],"+":e=>e[0]+e[1],"*":e=>e[0]*e[1],"**":e=>e[0]**e[1]}},methods:{eval({name:e,values:t}){return this.operators[e](t)},compare(e){let t=!1;for(let s=0;s<e.length;s++){const n=e[s];if("&&"===n){if(!e[s-1]||!e[s+1])break;t=!0}if("||"===n){if(!e[s-1]&&!e[s+1])break;t=!0}}return t},arrayRemove({list:e,items:t}){const s=[];for(let n=0;n<e.length;n++){let i=!1;for(let e=0;e<t.length;e++)if(n===t[e]){i=!0;break}i||s.push(e[n])}return s},arrayNextKeyValue({list:e,key:t,index:s=0}){const n=e[s][t];for(let i=s;i<e.length;i++)if(e[i][t]!==n)return[e[i][t],i];return[n,s]},arrayPrevKeyValue({list:e,key:t,index:s=0}){const n=e[s][t];for(let i=s;i>=0;i--)if(e[i][t]!==n)return[e[i][t],i];return[n,s]},arrayFindByKeyValue({list:e,key:t,valueIndex:s}){const n=s[0],i=s[1]||0,a=s=>e[s]&&e[s][t]===n,r=[];for(let s=i;s<e.length;s++)if(e[s][t]===n){const t=s+1;if(r.length){if(!a(t))return r.push(s),r}else{let n=s-1;if(i&&a(n)){for(;a(n);)n--;if(r.push(n+1),!a(t))return r.push(s),r}else{if(r.push(s),!a(t))return r.push(s),r;if(t===e.length)return r.push(s),r}}}},arrayMove({list:e,items:t,index:s}){const n=t.length;let i=s-(n-1);if(i>e.length-1||i<0&&s<0)return;i<=0&&s>=0&&(i=s);const a=[];for(let s=0;s<n;s++)a.push(e[t[s]]);t.sort(((e,t)=>e-t));const r=e;let o=1;for(let e=0;e<n;e++){r.splice(t[e],1);const s=e+1;s<n&&(t[s]=t[s]-o,++o)}const d=r.splice(i);return r.concat(a,d)},arrayMerge({list:e,items:t,flat:s}){let n=0;t.sort(((e,t)=>e._$index-t._$index));for(let s=0;s<t.length;s++){const i=t[s],a=i._$index+n;delete i._$index;const r=[i],o=e.splice(a);e=e.concat(r,o),++n}return s&&(e=e.flat(s)),e}}},p=s(258),g={name:p.name,version:p.version,dependencies:[{name:"dsAction",version:1}],data:{items:{}},methods:{addListener(e,{id:t,name:s,payload:n}){this.items[t]?this.items[t][s]?this.items[t][s].push(n):this.items[t][s]=[n]:this.items[t]={[s]:[n]}},emit(e,{id:t,name:s,payload:n}){const i=this._listener(t,e.name+"/"+s);for(let e=0;e<i.length;e++)this.$action("dsAction/dispatch",{id:i[e],data:n})},removeListener(e,{id:t,name:s,value:n}){if(this.items[t]&&this.items[t][s]){const e=this.items[t][s],i=[];for(let t=0;t<e.length;t++)e[t]!==n&&i.push(e[t]);i.length?this.items[t][s]=i:delete this.items[t][s]}},_listener(e,t){return this.items[e]&&this.items[e][t]?[...this.items[e][t]]:[]}}},v=s(615),f={name:v.name,version:v.version,data:{items:{},usedBy:{},instance:{}},methods:{process(e,{id:t,itemId:s,parentItemId:n,paramType:i,params:a,data:r,results:o,variables:d,lastItem:h}){const l={id:t,itemId:s,parentItemId:n};this.instance[t]||(this.instance[t]={data:{},iteration:{},variables:{},results:{}}),r&&(this.instance[t].data=r),o&&(this.instance[t].results[n]=o),d&&(d=this._processVariables(d,l),this.instance[t].variables={...this.instance[t].variables,...d});const c=this["_data/"+i](a,l);return h&&delete this.instance[t],c},set(e,t){this.items={...this.items,...t}},setUsedBy(e,t){for(const e in t)this.usedBy[e]={...this.usedBy[e],...t[e]}},_getParam(e,t){return e&&e._$id?this.items[e._$id]:e},_get(e,t){if(!e._$computed&&!e._$computedParams&&!e._$id)return e;if((e=this._getParam(e,t.id))._$computedParams)return this.process({...e,...t});const s=this._getParam(e.params,t.id);return this["_"+e.name](s,t)},_getValue(e,t){if(Object.hasOwnProperty.call(t,e))return t[e];if(Object.hasOwnProperty.call(e,"value"))return t;if(Object.hasOwnProperty.call(e,"key")){const s=e.key.split(".");let n={...t};for(let e=0;e<s.length;e++){const i=s[e];if(!Object.hasOwnProperty.call(t,i))return n;n=t[i]}return n}if(Object.hasOwnProperty.call(e,"index"))return t[e.index];if(Object.hasOwnProperty.call(e,"indexes")){const s=[];for(let n=0;n<e.indexes.length;n++){const i=e[n];s.push(t[i])}return s}const s={};for(let n=0;n<e.length;n++){const i=e[n];s[i]=t[i]}return s},_getVariable(e,t){const s=this.instance[t.id].variables[e];if(s)return Array.isArray(s)?[...s]:"object"==typeof s?{...s}:s},_arrayTransform(e,t){const s=e.map,n=e.flat;let i=[],a=e.list;a._$computed&&(a=this._get(a,t));for(let n=0;n<a.length;n++){const r=a[n],o=[];for(let i=0;i<s.length;i++){const a={};for(let e=0;e<s[i].length;e++){const o=s[i][e][0],d=s[i][e][1];if(r[d])a[o]=r[d];else if(Object.hasOwnProperty.call(d,"value"))a[o]=d.value;else if(Object.hasOwnProperty.call(d,"key")){const e=d.key.split(".");let t=r;for(let s=0;s<e.length;s++){const n=e[s];t[n]&&(t=t[n])}a[o]=t}else Object.hasOwnProperty.call(d,"index")?a[o]=n:(this.instance[t.id].iteration={...r,_$index:n},a[o]=this._get(d,t))}e.onIteration&&(this.instance[t.id].iteration={...a,_$index:n},this.$method("dsAction/dispatch",{...e.onIteration,id:t.id,itemId:t.itemId,parentItemId:t.parentItemId})),o.push(a)}i.push(o)}return n&&(i=i.flat(n)),i},_eval(e,t,s){for(let n=0;n<e.length;n++){const i=e[n],a=this._processValues(i.values,t);s+=this.$method("dsOperators/eval",{name:i.name,values:a})}return s},_evalBoolean(e,t){return!!this._eval(e,t,!1)},_evalNumber(e,t){return this._eval(e,t,0)},_evalString(e,t){return this._eval(e,t,"")},_processValues(e,t){const s=[];for(let n=0;n<e.length;n++){const i=e[n];i.value?s.push(i.value):s.push(this._get(i,t))}return s},_processVariables(e,t){const s={};for(let n=0;n<e.length;n++){const i=e[n][0],a=e[n][1];a.value?s[i]=a.value:s[i]=this._get(a,t)}return s},"_getter/plugin/method"(e,t){let s;e.params&&(s=this._get(this._getParam(e.params,t.id),t));const n=this.$method(e.name,s);return e.return?this._getValue(e.return,n):n},"_getter/this/id"(e,{id:t}){return this.instance[t].data.id},"_getter/this/instanceId"(e,{id:t}){return this.instance[t].data.instanceId},"_getter/this/value"(e,{id:t}){const s=this.instance[t].data.value;return e?this._getValue(e,{...s}):s},"_getter/iteration/value"(e,{id:t}){const s=this.instance[t].iteration;return e?this._getValue(e,{...s}):s},"_getter/parent/value"(e,{id:t,parentItemId:s}){e._$itemId&&(s=e._$itemId);const n=this.instance[t].results[s];if(Object.hasOwnProperty.call(n,e))return n[e];if(Object.hasOwnProperty.call(e,"value"))return n;if(Object.hasOwnProperty.call(e,"key")){const t=e.key.split(".");let s=n;for(let e=0;e<t.length;e++){const n=t[e];if(!s[n])return s;s=s[n]}}},"_getter/parent/array"(e,{id:t,parentItemId:s}){const n=[];e._$itemId&&(s=e._$itemId);const i=this.instance[t].results[s];for(let t=0;t<e.indexes.length;t++){const s=e[t];n.push(i[s])}return n},"_getter/parent/object"(e,{id:t,parentItemId:s}){const n={};e._$itemId&&(s=e._$itemId);const i=this.instance[t].results[s];for(let t=0;t<e.keys.length;t++){const s=e[t],a=s.split(".");let r=i;for(let e=0;e<a.length;e++){const t=a[e];r[t]&&(r=r[t])}n[s]=r}return n},"_data/array"(e,t){const s=[];for(let n=0;n<e.length;n++)s.push(this._get(e[n],t));return s},"_data/object"(e,t){const s={};for(let n=0;n<e.length;n++){const i=e[n];s[i[0]]=this._get(i[1],t)}return s},"_data/value"(e,t){return this._get(e,t)}}},_=s(308);let I=e=>crypto.getRandomValues(new Uint8Array(e)),w=(e,t=21)=>((e,t,s)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*t/e.length);return(a=t)=>{let r="";for(;;){let t=s(i),o=i;for(;o--;)if(r+=e[t[o]&n]||"",r.length===a)return r}}})(e,t,I);var x={name:_.name,version:_.version,data:{docId:null,instanceId:null},setup({docId:e,instanceId:t}){this.docId=w(e.alphabet,e.alphabetLength),this.instanceId=w(t.alphabet,t.alphabetLength)},methods:{generateDocId(){return this.docId()},generateInstanceId(){return this.instanceId()}}},b=s(314),y={name:b.name,version:b.version,dependencies:[{name:"dsEvent",version:1}],data:{id:"base"+b.name.charAt(0).toUpperCase()+b.name.substring(1),state:{},searchParams:null,items:{},cleanUrlSet:[["a","[ÀÁÂÃÄÅÆĀĂĄẠẢẤẦẨẪẬẮẰẲẴẶ]"],["c","[ÇĆĈČ]"],["d","[ÐĎĐÞ]"],["e","[ÈÉÊËĒĔĖĘĚẸẺẼẾỀỂỄỆ]"],["g","[ĜĞĢǴ]"],["h","[ĤḦ]"],["i","[ÌÍÎÏĨĪĮİỈỊ]"],["j","[Ĵ]"],["ij","[Ĳ]"],["k","[Ķ]"],["l","[ĹĻĽŁ]"],["m","[Ḿ]"],["n","[ÑŃŅŇ]"],["o","[ÒÓÔÕÖØŌŎŐỌỎỐỒỔỖỘỚỜỞỠỢǪǬƠ]"],["oe","[Œ]"],["p","[ṕ]"],["r","[ŔŖŘ]"],["s","[ßŚŜŞŠ]"],["t","[ŢŤ]"],["u","[ÙÚÛÜŨŪŬŮŰŲỤỦỨỪỬỮỰƯ]"],["w","[ẂŴẀẄ]"],["x","[ẍ]"],["y","[ÝŶŸỲỴỶỸ]"],["z","[ŹŻŽ]"],["-","[·/_,:;']"]]},setup(){window.addEventListener("popstate",(e=>{this._updateState(),console.log(e.state,this.state),this.$method("dsApp/update",this.state),this.$action("dsEvent/emit",{id:this.id,name:"navigate",payload:{value:this.currentPathname()}})}))},methods:{getCurrentId(){const e=this.currentPathname();return this.items[e]},getPathById(e,t){return this.items[t]},currentPathname:()=>window.location.pathname,set(e,t){this.items={...this.items,...t},this._updateState()},navigate(e,t){const s=this.currentPathname(),n=this.items[s];let i=this.items[t];if(i)this.$method("dsApp/update",{prevId:n,nextId:i}),window.history.pushState({prevId:n,nextId:i},"",t),this._updateState();else{const e=this.$method("dsRouter/cleanPath",t);this.$action("dsApp/fetch",e,{onSuccess:e=>{i=e.routes[t],this.$method("dsApp/set",e),this.$method("dsApp/update",{prevId:n,nextId:i}),window.history.pushState({prevId:n,nextId:i},"",t),this._updateState(),this.$action("dsEvent/emit",{id:this.id,name:"navigate",payload:this.state})},onError:e=>{console.error(e)}})}},cleanPath(e,t){let s=t.toString().toLowerCase().trim();return s=this._replaceString(s),s.replace(/\s+/g,"-").replace(/[+]/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-")},_updateState(){const e=this.currentPathname();this.state.nextPath!==e&&(this.state.prevPath=this.state.nextPath,this.state.prevId=this.state.nextId,this.state.nextPath=e,this.state.nextId=this.getCurrentId())},_replaceString(e){for(let t=0;t<this.cleanUrlSet.length;t++){const[s,n]=this.cleanUrlSet[t];e=e.replace(new RegExp(n,"gi"),s)}return e}}},E=s(155),O={link({id:e,crossOrigin:t,href:s,media:n,referrerPolicy:i,rel:a="stylesheet",integrity:r,onSuccess:o=(()=>{}),onError:d=(()=>{})}){const[h,l]=this._exists(e,"link","href",s);h.onerror=()=>d(),h.onload=()=>o(),h.id=e,h.rel=a,h.crossOrigin=t||null,n&&(h.media=n),i&&(h.referrerPolicy=i),r&&(h.integrity=r),h.href=s,l||document.head.appendChild(h)},script({id:e,async:t,crossOrigin:s,defer:n,integrity:i,nonce:a,referrerPolicy:r,src:o,type:d="text/javascript",nomodule:h,globalVars:l=[],onSuccess:c=(()=>{}),onError:m=(()=>{})}){const[u,p]=this._exists(e,"script","src",o);u.onerror=()=>m(),u.onload=()=>{const e={};for(let t=0;t<l.length;t++){const s=l[t];e[s]=window[s]}c(e)},u.id=e,u.type=d,u.async=t||null,u.crossOrigin=s||null,u.defer=n||null,i&&(u.integrity=i),r&&(u.referrerPolicy=r),u.nomodule=h||null,u.nonce=a||null,u.src=o,p||document.head.appendChild(u)},_exists(e,t,s,n){let i=document.getElementById(e),a=!1;if(i){if(i[s]===n)return;a=!0}else i=document.createElement(t);return[i,a]}},$={name:E.name,version:E.version,data:{_methods:{},buildId:"",additionalPlugins:{},plugins:{},appBuildId:"",appPlugins:[],appAdditionalPlugins:[],queue:{},isLoaded:{},setupOnRequest:{},setupOnRequestQueue:{},metadata:{},context:{}},setup({buildId:e,plugins:t=[],additionalPlugins:s=[],isDev:n}){this.buildId=e,this.context=[{name:"isDev",dispatch:!1,value:n},{name:"$action",dispatch:!0,value:this._action.bind(this)},{name:"$method",dispatch:!0,value:this._method.bind(this)},{name:"$resource",dispatch:!1,value:O}],this._add({name:E.name,version:E.version,methods:{use:this.use}}),this.isLoaded[E.name]=!0;for(let e=0;e<t.length;e++){const s=t[e];this.plugins[s.item.name]=s.item.version,this.use({},s)}for(let e=0;e<s.length;e++){const t=s[e];this.additionalPlugins[t.item.name]=t.item.version,this.use({},t)}},methods:{use(e,{item:t,options:s={},plugin:n}){if(s.onDemand)return this._addMetadata(t);if(this.isLoaded[t.name])return Promise.resolve();if(this.queue[t.name]&&!this.setupOnRequest[t.name])return this._isLoading(t.name);{this._addMetadata(t);const e=this._install(t.name,n,s.setupOnRequest);this.queue[t.name]=[e]}},_actionExists(e){return this._methods[e]},_addMetadata(e){this.queue[e.name]&&delete this.queue[e.name],this.isLoaded[e.name]=!1,this.metadata[e.name]=e},_callbackWhenAvailable(e,t){if(this._actionExists(e))return t();const s=e.split("/")[0];this.queue[s]&&!this.setupOnRequest[s]?this._isLoading(s).then((()=>{this._actionExists(e)?t():console.error("action does not exist: "+e)})):this.setupOnRequest[s]?this._isLoading(s).then((()=>{this.use({},{item:{name:s}}).then((()=>{this._actionExists(e)?t():console.error("action does not exist: "+e)}))})):this.metadata[s]?this.use({},{item:{name:s}}).then((()=>{this._actionExists(e)?t():console.error("action does not exist: "+e)})):console.error("action does not exist: "+e)},_install(e,s,n){return new Promise(((i,a)=>{this.isLoaded[e]=!1,this.setupOnRequest[e]=!!n,this._load(e,s).then((({plugin:s,setupOptions:r})=>{const o=[];if(n)return this.setupOnRequestQueue[e]=s,i();if(s.dependencies){const n=[];for(let e=0;e<s.dependencies.length;e++){const t=this.use({},{item:{name:s.dependencies[e].name,version:s.dependencies[e].version}});n.push(t)}Promise.all(n).then((()=>{const n=new t(s,this.context),d=this._setup(n,r);d&&o.push(d),Promise.all(o).then((()=>{this._add(n),this.isLoaded[e]=!0,i()})).catch((e=>a(e)))})).catch((e=>a(e)))}else{const n=new t(s,this.context),d=this._setup(n,r);d&&o.push(d),Promise.all(o).then((()=>{this._add(n),this.isLoaded[e]=!0,i()})).catch((e=>a(e)))}})).catch((e=>a(e)))}))},_isLoading(e){return Promise.all(this.queue[e])},_load(e,t){return new Promise(((s,n)=>{let i={},a={id:e};if(this.metadata[e]){const t=this.metadata[e];t||n({statusCode:404,message:"Plugin not found: "+e}),t.script&&(a={...a,...t.script}),t.setupOptions&&(i=t.setupOptions)}if(t)return s({plugin:t,setupOptions:i});if(this.setupOnRequestQueue[e])return t=this.setupOnRequestQueue[e],delete this.setupOnRequestQueue[e],s({plugin:t,setupOptions:i});const r={statusCode:404,message:"Plugin not found: "+e};a.src?(a.onSuccess=()=>{const t=window.dsApp.plugins[e];if(t)return s({plugin:t,setupOptions:i});{const t=new Error("Plugin was not found: "+e);return n(t)}},a.onError=()=>n(r),O.script(a)):n(r)}))},_action(e){return(t,s,n={})=>{this._callbackWhenAvailable(t,(()=>{const i=n.onSuccess,a=n.onError,r=this._methods[t](e,s);a&&r instanceof Error?a.method?a.method({...a.params,results:r}):a(r):r instanceof Promise?Promise.resolve(r).then((e=>{i&&(i.method?i.method({...i.params,results:e}):i(e))})).catch((e=>{a&&(a.method?a.method({...a.params,results:e}):a(e))})):i&&(i.method?i.method({...i.params,results:r}):i(r))}))}},_setup(e,t){const s=e.init(t);if(s instanceof Promise)return s},_add(e){if(e.methods)for(const t in e.methods)if(Object.hasOwnProperty.call(e.methods,t)){const s=e.methods[t];this._methods[`${e.name}/${t}`]=s}},_method(e){return(t,s)=>{try{if(this._methods[t])return this._methods[t](e,s);throw new Error('Method "'+t+'" does not exist')}catch(e){console.error(e)}}}}},P=s(946),L={name:P.name,version:P.version,dependencies:[{name:"dsRouter",version:1},{name:"dsContent",version:1},{name:"dsWidget",version:1}],data:{cssElement:null,assetsURL:"",appElement:null,pages:{},pageTypes:{},template:{}},setup(e){let{appElement:t,appCache:s={},assetsURL:n}=e;this.appElement=t,this.assetsURL=n,this.set({},s);const i=this.$method("dsRouter/getCurrentId");this.render({},i)},methods:{fetch(e,t){return new Promise((e=>{this.$resource.script({id:"ds-app-cache__"+t,src:this.assetsURL+"/app_cache/"+window.location.hostname+"/"+t+".js",globalVars:["dsAppCache"],onSuccess:t=>{let{dsAppCache:s}=t;return e(s)},onError:()=>e()})}))},set(e,t){t.actions&&(this.$method("dsAction/set",t.actions.items),this.$method("dsAction/setConditions",t.actions.conditions)),t.params&&(this.$method("dsParameters/set",t.params.items),this.$method("dsParameters/setUsedBy",t.params.usedBy)),t.widgets&&(this.$method("dsWidget/setContent",t.widgets.content),this.$method("dsWidget/setChildren",t.widgets.children),this.$method("dsWidget/setLayout",t.widgets.layout),this.$method("dsWidget/setBaseItem",t.widgets.baseItems),this.$method("dsWidget/setItem",t.widgets.items)),this.$method("dsContent/set",t.content),this.$method("dsRouter/set",t.routes),this._setPage(t.pages),this._setPageType(t.pageTypes),this._setTemplate(t.templates)},update(e,t){let{prevId:s,nextId:n}=t;const i=this.pages[s],a=this.pageTypes[i.pageTypeId],r=this.templates[a.templateId],o=this.pages[n],d=this.pageTypes[o.pageTypeId],h=this.templates[d.templateId];h.classList&&document.body.setAttribute("class",h.classList.join(" "));const l=h.widgets.length,c=r.widgets.length,m=l>c?l:c;for(let e=0;e<m;e++){const t=h.widgets[e],i=r.widgets[e];if(t){let e=this.$method("dsWidget/getItem",s+"__"+i),a=this.$method("dsWidget/getItem",n+"__"+t);e||(e=this.$method("dsWidget/getBaseItem",i)),a||(a=this.$method("dsWidget/getBaseItem",t));const r=a.length>e.length?a.length:e.length;for(let t=0;t<r;t++){const s=a[t],n=e[t];if(s){const e=this.$method("dsWidget/create",{layoutId:s.layoutId,instanceId:s.instanceId});if(n){let t=null;t=this.$method("dsWidget/getElement",n.instanceId)[0].parentElement,t||(t=this.appElement),t.replaceChildren(...e)}else this.appElement.appendChild(...e)}else if(n){const e=this.$method("dsWidget/getElement",n.instanceId);for(let t=0;t<e.length;t++)e[t].remove()}}}else if(i){let e=this.$method("dsWidget/getItem",s+"__"+i);e||(e=this.$method("dsWidget/getBaseItem",i));for(let t=0;t<e.length;t++){const s=e[t],n=this.$method("dsWidget/getElement",s.instanceId);for(let e=0;e<n.length;e++)n[e].remove()}}}},render(e,t){const s=this.pages[t],n=this.pageTypes[s.pageTypeId],i=this.templates[n.templateId];i.classList&&document.body.setAttribute("class",i.classList.join(" "));for(let e=0;e<i.widgets.length;e++){const s=i.widgets[e];let n=this.$method("dsWidget/getItem",t+"__"+s);n||(n=this.$method("dsWidget/getBaseItem",s));for(let e=0;e<n.length;e++){const t=n[e],s=this.$method("dsWidget/create",{layoutId:t.layoutId,instanceId:t.instanceId});for(let e=0;e<s.length;e++)this.appElement.appendChild(s[e])}}},_setPage(e){this.pages={...this.pages,...e}},_setPageType(e){this.pageTypes={...this.pageTypes,...e}},_setTemplate(e){this.templates={...this.templates,...e}}}};const C=[{item:{name:y.name,version:y.version},plugin:y,options:{setupOnRequest:!1}},{item:{name:o.name,version:o.version},plugin:o,options:{setupOnRequest:!1}},{item:{name:h.name,version:h.version},plugin:h,options:{setupOnRequest:!1}},{item:{name:c.name,version:c.version},plugin:c,options:{setupOnRequest:!1}},{item:{name:a.name,version:a.version},plugin:a,options:{setupOnRequest:!1}},{item:{name:g.name,version:g.version},plugin:g,options:{setupOnRequest:!1}},{item:{name:f.name,version:f.version},plugin:f,options:{setupOnRequest:!1}},{item:{name:u.name,version:u.version},plugin:u,options:{setupOnRequest:!1}},{item:{name:x.name,version:x.version,setupOptions:{docId:{alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",alphabetLength:20},instanceId:{alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",alphabetLength:17}}},plugin:x,options:{setupOnRequest:!1}}];var T={plugins:{},init(e){let{appCache:s,appElement:n,assetsURL:i}=e;const a=new t($);C.push({item:{name:L.name,version:L.version,setupOptions:{appCache:s,appElement:n,assetsURL:i}},plugin:L,options:{setupOnRequest:!1}}),a.init({build:1,plugins:C,isDev:!0})}}})(),window.dsApp=n.default})();
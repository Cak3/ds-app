(()=>{var e={946:(e,t,n)=>{const{hash:s}=n(607);e.exports={name:"dsApp",filename:"ds-app",version:1,integrity:s}},607:e=>{e.exports={hash:"sha512-hkhD8NtPFiKheeJH+nk7SvMt+1e4KXqTzEHbvwRi6U3a2Jov1BY9RngE9Kf1+xW3bzjL65fDE/Uqy9wm6rOL7Q=="}},724:e=>{e.exports={name:"dsAction",filename:"ds-action",version:1}},313:(e,t,n)=>{const{hash:s}=n(633);e.exports={name:"dsContent",filename:"ds-content",version:1,integrity:s}},633:e=>{e.exports={hash:"sha512-z5UgOiTBL4qHC08JHij7jkWr88NaQCioZ76gtJZzzY0VNtu0rPTfHl1h5hGzledJT3FOv0b1ReNw7eLu+5au0w=="}},477:e=>{e.exports={name:"dsElement",filename:"ds-element",version:"1"}},737:e=>{e.exports={name:"dsEvent",filename:"ds-event",version:1}},161:e=>{e.exports={name:"dsWidget",filename:"ds-widget",version:1}},36:e=>{e.exports={name:"dsManager",filename:"ds-plugin-manager",version:1}},190:e=>{e.exports={name:"dsOperators",filename:"ds-operators",version:"0.1.0"}},425:e=>{e.exports={name:"dsParameters",filename:"ds-parameters",version:1}},130:e=>{e.exports={name:"dsRouter",filename:"ds-router",version:1}},966:e=>{e.exports={name:"dsUtilities",filename:"ds-utilities",version:1}}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var l=t[s]={exports:{}};return e[s](l,l.exports,n),l.exports}(()=>{"use strict";function e(e,t=[]){this.name=e.name,this.version=e.version,this._context={},e.data&&(this._context={...e.data});for(let n=0;n<t.length;n++){const s=t[n],i={name:e.name,version:e.version,dependencies:e.dependencies};s.dispatch?this._context[s.name]=s.value(i):this._context[s.name]=s.value}if(e.dependencies&&(this.dependencies=e.dependencies),e.getters){const t={};for(const n in e.getters)if(Object.hasOwnProperty.call(e.getters,n)){const s=e.getters[n];Object.defineProperty(this._context,n,{get:s}),"_"!==n.charAt(0)&&(t[n]=s.bind(this._context))}this.getters=t}if(e.methods){const t={};for(const n in e.methods)if(Object.hasOwnProperty.call(e.methods,n)){const s=e.methods[n];this._context[n]=s,"_"!==n.charAt(0)&&(t[n]=s.bind(this._context))}this.methods=t}e.setup&&(this.setup=e.setup.bind(this._context))}e.prototype.init=function(e){if(this.setup)return this.setup(e)};var t=e,s=n(724),i={name:s.name,version:s.version,dependencies:[{name:"dsParameters",version:1}],data:{items:{},conditions:{},lastActionIndex:{}},methods:{dispatch(e,{id:t,data:n}){this._dispatch({root:!0,parentItemId:t,actions:this.items[t],conditions:this.conditions[t]||[],data:n})},_dispatch({root:e,instanceId:t,parentItemId:n,actions:s=[],conditions:i=[],data:l,results:o={}}){let a=!1,r=!0,c=!1;e&&(t=this.$method("dsUtilities/generateInstanceId"),this.lastActionIndex[t]=s.length-1),i.length&&(r=this._compare(i,{instanceId:this.$method("dsUtilities/generateInstanceId"),parentItemId:n,data:l}));for(let e=0;e<s.length;e++){const i=s[e],d=i.itemId,m=i.items[d];if(m.conditions&&(r=this._compare(m.conditions,{instanceId:this.$method("dsUtilities/generateInstanceId"),parentItemId:n,data:l})),Object.hasOwnProperty.call(m,"when")&&r!==m.when)return;if(Object.hasOwnProperty.call(m,"value"))return[m.value];const u={onSuccess:null,onError:null};Array.isArray(m.onSuccess)&&m.onSuccess.length&&(c=!0,u.onSuccess={params:{instanceId:t,parentItemId:d,actions:this._createActions(m.onSuccess,i),data:l},method:this._dispatch.bind(this)}),Array.isArray(m.onError)&&m.onSuccess.length&&(c=!0,u.onError={params:{id:t,parentItemId:d,actions:this._createActions(m.onError,i),data:l},method:this._dispatch.bind(this)}),e!==this.lastActionIndex[t]||c||(a=!0,delete this.lastActionIndex[t]);const h=this._action({instanceId:t,itemId:d,items:i.items,conditions:i.conditions,parentItemId:n,...m,callback:u,data:l,results:o,lastItem:a});h&&(o[d]=h)}return o},set(e,t={}){this.items={...this.items,...t}},setConditions(e,t={}){this.conditions={...this.conditions,...t}},_createActions(e,t){const n=[];for(let s=0;s<e.length;s++)n.push({itemId:e[s],items:t.items,params:t.params});return n},_action({instanceId:e,name:t,type:n,computedParams:s,paramType:i,paramItems:l,params:o,data:a,results:r,callback:c={},itemId:d,parentItemId:m,lastItem:u}){return s&&(o=this.$method("dsParameters/process",{id:e,itemId:d,parentItemId:m,paramType:i,params:o,paramItems:l,data:a,results:r,lastItem:u})),this["_"+n]({name:t,params:o,callback:c})},_onError(e,t,n){let s=n;t&&(s={...t,result:n}),e(s)},_onSuccess(e,t,n){let s=n;t&&(s={...t,results:n}),e(s)},_compare(e,{instanceId:t,parentItemId:n,data:s}){let i=!1,l=!1,o=[];for(let i=0;i<e.length;i++){const a=e[i],r=a.name;if("&&"===r||"||"===r)o=[...o,r],l=!0;else{const e=[],i=a.values.length-1;for(let l=0;l<a.values.length;l++){const o=a.values[l];let r=o.value;Object.hasOwnProperty.call(o,"itemId")&&(r=this._action({instanceId:t,itemId:o.itemId,parentItemId:n,paramItems:a.params,data:s,lastItem:i===l,...a.items[o.itemId]})),e.push(r)}const l=this.$method("dsOperators/eval",{name:r,values:e});o.push(l)}}if(l)i=this.$method("dsOperators/compare",o);else for(let e=0;e<o.length;e++)if(i=!0,!o[e]){i=!1;break}return i},_getProcessValue({params:e,callback:t}){const n=t.onSuccess,s=t.onError,i=e;return n&&this._onSuccess(n.method||n,n.params,i),s&&this._onError(s.method||s,s.params),i},_pluginAction({name:e,params:t,callback:n}){this.$action(e,t,n)},_pluginMethod({name:e,params:t,callback:n}){const s=n.onSuccess,i=this.$method(e,t);s&&this._onSuccess(s.method||s,s.params,i)}}},l=n(161),o={name:l.name,version:l.version,dependencies:[{name:"dsElement",version:1},{name:"dsContent",version:1}],data:{content:{},children:{},layout:{},baseItems:{},items:{},elements:{}},methods:{add(e,{id:t,instanceId:n,layout:s,content:i,children:l}){this.children[t]=l,this.layout[t]=s,this.content[n]=i},addBaseItem(e,{id:t,item:n}){this.baseItems[t]=n},create(e,{layoutId:t,instanceId:n}){if(!this.elements[n]){const e=this.layout[t],s=this.children[t];return this.elements[n]=this._render(t,n,e,s,e),this.elements[n]}return this.elements[n]},getElement(e,t){return this.elements[t]},getBaseItem(e,t){return this.baseItems[t]},getItem(e,t){return this.items[t]},setBaseItem(e,t={}){this.baseItems={...this.baseItems,...t}},setItem(e,t={}){this.items={...this.items,...t}},setChildren(e,t={}){this.children={...this.children,...t}},setContent(e,t={}){this.content={...this.content,...t}},setLayout(e,t={}){this.layout={...this.layout,...t}},_content(e,t){return this.content[e][t]},_render(e,t,n,s,i){const l=[];for(let o=0;o<s.length;o++){const a=i[s[o]];let r;if(a.component.elementId=a.component.elementId?a.component.elementId:t+"__"+o,r="element"===a.component.type?this.$method("dsElement/create",a.component):this.$method("dsElement/createNode",a.component.id),a.children){const s=this._sibling(e,n,a.children),i=this._render(e,t,n,s.children,s.items);if(a.contentIndex){const e=this._content(t,a.contentIndex);this.$method("dsContent/subscribe",{id:e.id,item:r})}console.log(r,i);for(let e=0;e<i.length;e++)r.appendChild(i[e])}else if(Object.hasOwnProperty.call(a,"contentIndex")){const e=this._content(t,a.contentIndex);this.$method("dsContent/subscribe",{id:e.id,item:r})}l.push(r)}return l},_sibling(e,t,n){const s={items:[],children:[]};for(let i=0;i<n.length;i++){const l=n[i],o=t[l];o.component.elementId=e+"__"+l,s.items.push(o),s.children.push(i)}return s}}},a=n(477),r={name:a.name,version:a.version,dependencies:[{name:"dsEvent",version:1}],data:{items:{dsAnchor:{is:"ds-a",tag:"a"},dsDiv:{is:"ds-div",tag:"div"},dsH1:{is:"ds-h1",tag:"h1"},dsH2:{is:"ds-h2",tag:"h2"},dsH3:{is:"ds-h3",tag:"h3"},dsH4:{is:"ds-h4",tag:"h4"},dsH5:{is:"ds-h5",tag:"h5"},dsH6:{is:"ds-h6",tag:"h6"},dsP:{is:"ds-p",tag:"p"},dsSpan:{is:"ds-span",tag:"span"},dsButton:{is:"ds-button",tag:"button"},dsImage:{is:"ds-image",tag:"img"},dsLabel:{is:"ds-label",tag:"label"},dsInput:{is:"ds-input",tag:"input"},dsTextarea:{is:"ds-textarea",tag:"textarea",attributes:{rows:"3"}},get dsText(){return new window.DsText},get dsFragment(){return new window.DocumentFragment}}},setup(){const e=e=>class extends e{constructor(){super(),this.elementId="",this.$action=()=>{}}connectedCallback(){this.$action("dsEvent/emit",{id:this.elementId,name:"mounted"})}disconnectedCallback(){this.$action("dsEvent/emit",{id:this.elementId,name:"unmounted"})}},t=e=>class extends e{get dsContent(){return this.textContent}set dsContent(e){this.textContent=e}},n=e=>class extends e{get dsContent(){return this.innerHTML}set dsContent(e){this.innerHTML=e}};class s extends(e(window.HTMLImageElement)){get dsContent(){return{src:this.src,alt:this.alt}}set dsContent(e){this.src=e.src,this.alt=e.alt||"",this.height=e.height||null,this.width=e.width||null}}class i extends(e(window.HTMLAnchorElement)){constructor(){super(),this.addEventListener("click",this.click.bind(this))}get dsContent(){return{href:this.href,pathname:this.pathname}}set dsContent(e){this.href=e.href}click(e){0!==e.button||"_self"===e.target.target||this.isModifiedEvent(e)||(e.preventDefault(),this.$action("dsRouter/navigate",e.target.pathname))}isModifiedEvent(e){return!!(e.getModifierState("Alt")||e.getModifierState("Control")||e.getModifierState("Meta")||e.getModifierState("Shift"))}}class l extends(n(e(window.HTMLDivElement))){}class o extends(n(e(window.HTMLSpanElement))){}class a extends(n(e(window.HTMLParagraphElement))){}class r extends(n(e(window.HTMLHeadingElement))){}class c extends(n(e(window.HTMLHeadingElement))){}class d extends(n(e(window.HTMLHeadingElement))){}class m extends(n(e(window.HTMLHeadingElement))){}class u extends(n(e(window.HTMLHeadingElement))){}class h extends(n(e(window.HTMLHeadingElement))){}class p extends(n(e(window.HTMLLabelElement))){}class g extends(t(window.Text)){}class v extends(n(e(window.HTMLButtonElement))){constructor(){super(),this.addEventListener("click",(e=>{this.$action("dsEvent/emit",{id:this.elementId,name:"click"})}))}}class f extends(e(window.HTMLInputElement)){constructor(){super(),this.addEventListener("input",(e=>{this.$action("dsEvent/emit",{id:this.elementId,name:"input",payload:e.target.value})}))}get dsContent(){return this.value}set dsContent(e){this.value=e}}class _ extends(t(e(window.HTMLTextAreaElement))){constructor(){super(),this.addEventListener("input",(e=>{this.$action("dsEvent/emit",{id:this.elementId,name:"input",payload:e.target.value})}))}}window.DsText=g,window.customElements.define("ds-a",i,{extends:"a"}),window.customElements.define("ds-span",o,{extends:"span"}),window.customElements.define("ds-image",s,{extends:"img"}),window.customElements.define("ds-h1",r,{extends:"h1"}),window.customElements.define("ds-h2",c,{extends:"h2"}),window.customElements.define("ds-h3",d,{extends:"h3"}),window.customElements.define("ds-h4",m,{extends:"h4"}),window.customElements.define("ds-h5",u,{extends:"h5"}),window.customElements.define("ds-h6",h,{extends:"h6"}),window.customElements.define("ds-p",a,{extends:"p"}),window.customElements.define("ds-div",l,{extends:"div"}),window.customElements.define("ds-button",v,{extends:"button"}),window.customElements.define("ds-input",f,{extends:"input"}),window.customElements.define("ds-label",p,{extends:"label"}),window.customElements.define("ds-textarea",_,{extends:"textarea"})},methods:{create(e,t){const n=this._getComponent(t.id),s=[];if(t.classList&&s.push(["class",t.classList.join(" ")]),t.attributes){n.attributes={...n.attributes,...t.attributes};for(const e in n.attributes)s.push([e,n.attributes[e]])}else if(n.attributes)for(const e in n.attributes)s.push([e,n.attributes[e]]);return this._createHTMLElement(t.elementId,n.tag,n.is,s)},createNode(e,t){return this.items[t]},_getComponent(e){return{...this.items[e]}},_createHTMLElement(e,t,n,s=[]){const i=document.createElement(t,{is:n});i.$action=this.$action,i.elementId=e;for(let e=0;e<s.length;e++)i.setAttribute(s[e][0],s[e][1]);return i}}},c=n(313),d={name:c.name,version:c.version,dependencies:[{name:"dsUtilities",version:1}],data:{items:{},observers:{},defaultItems:{text:{value:"",type:"text"},image:{value:{src:"",alt:""}},html:{type:"html",value:""}}},methods:{create(e,t){const n=[];for(let e=0;e<t.length;e++){const s=this.$method("dsUtilities/generateInstanceId"),i=t[e].type,l=this._generateContent(i,t[e].value);this.items[s]=l,n.push({id:s,type:i})}return n},remove(e,{id:t}){this.items[t]&&delete this.items[t]},set(e,t={}){this.items={...this.items,...t}},subscribe(e,{id:t,item:n}){this._getContent(t)&&this._setObserver(t,n)},unsubscribe(e,{id:t,item:n}){const s=this._getObservers(t),i=s.indexOf(n);i>-1&&s.splice(i,1)},update(e,{id:t,value:n}){const s=this._getContent(t);s&&(s.value=n,this._updateObservers(t,n))},_generateContent(e,t){const n={...this.defaultItems[e]};return t&&(n.value=t),n},_getContent(e){return this.items[e]},_setObserver(e,t){const n=this._getObservers(e),s=this._getContent(e);n.length?-1===n.indexOf(t)&&n.push(t):this.observers[e]=[t],this._updateObserver(e,t,s.value)},_getObservers(e){return this.observers[e]||[]},_updateObserver(e,t,n){const s=this._getObservers(e),i=s.indexOf(t);i>-1&&(s[i].dsContent=n)},_updateObservers(e,t){const n=this._getObservers(e);for(let e=0;e<n.length;e++)n[e].dsContent=t}}},m=n(190),u={name:m.name,version:m.version,data:{operators:{"==":e=>e[0]===e[1],"!=":e=>e[0]!==e[1],">":e=>e[0]>e[1],">=":e=>e[0]>=e[1],"<":e=>e[0]<e[1],"<=":e=>e[0]<=e[1],"!":e=>!e[0],"!!":e=>!!e[0],"%":e=>e[0]%e[1],"++x":e=>++e[0],"x++":e=>e[0]++,"--x":e=>--e[0],"x--":e=>e[0]--,"-":e=>e[0]-e[1],"+":e=>e[0]+e[1],"*":e=>e[0]*e[1],"**":e=>e[0]**e[1]}},methods:{eval({name:e,values:t}){return this.operators[e](t)},compare(e){let t=!1;for(let n=0;n<e.length;n++){const s=e[n];if("&&"===s){if(!e[n-1]||!e[n+1])break;t=!0}if("||"===s){if(!e[n-1]&&!e[n+1])break;t=!0}}return t},arrayRemove({list:e,items:t}){const n=[];for(let s=0;s<e.length;s++){let i=!1;for(let e=0;e<t.length;e++)if(s===t[e]){i=!0;break}i||n.push(e[s])}return n},arrayNextKeyValue({list:e,key:t,index:n=0}){const s=e[n][t];for(let i=n;i<e.length;i++)if(e[i][t]!==s)return[e[i][t],i];return[s,n]},arrayPrevKeyValue({list:e,key:t,index:n=0}){const s=e[n][t];for(let i=n;i>=0;i--)if(e[i][t]!==s)return[e[i][t],i];return[s,n]},arrayFindByKeyValue({list:e,key:t,valueIndex:n}){const s=n[0],i=n[1]||0,l=n=>e[n]&&e[n][t]===s,o=[];for(let n=i;n<e.length;n++)if(e[n][t]===s){const t=n+1;if(o.length){if(!l(t))return o.push(n),o}else{let s=n-1;if(i&&l(s)){for(;l(s);)s--;if(o.push(s+1),!l(t))return o.push(n),o}else{if(o.push(n),!l(t))return o.push(n),o;if(t===e.length)return o.push(n),o}}}},arrayMove({list:e,items:t,index:n}){const s=t.length;let i=n-(s-1);if(i>e.length-1||i<0&&n<0)return;i<=0&&n>=0&&(i=n);const l=[];for(let n=0;n<s;n++)l.push(e[t[n]]);t.sort(((e,t)=>e-t));const o=e;let a=1;for(let e=0;e<s;e++){o.splice(t[e],1);const n=e+1;n<s&&(t[n]=t[n]-a,++a)}const r=o.splice(i);return o.concat(l,r)},arrayMerge({list:e,items:t,flat:n}){let s=0;t.sort(((e,t)=>e._$index-t._$index));for(let n=0;n<t.length;n++){const i=t[n],l=i._$index+s;delete i._$index;const o=[i],a=e.splice(l);e=e.concat(o,a),++s}return n&&(e=e.flat(n)),e}}},h=n(737),p={name:h.name,version:h.version,dependencies:[{name:"dsAction",version:1}],data:{items:{}},methods:{addListener(e,{id:t,name:n,payload:s}){this.items[t]?this.items[t][n]?this.items[t][n].push(s):this.items[t][n]=[s]:this.items[t]={[n]:[s]}},emit(e,{id:t,name:n,payload:s}){const i=this._listener(t,e.name+"/"+n);for(let e=0;e<i.length;e++)this.$action("dsAction/dispatch",{id:i[e],data:s})},removeListener(e,{id:t,name:n,value:s}){if(this.items[t]&&this.items[t][n]){const e=this.items[t][n],i=[];for(let t=0;t<e.length;t++)e[t]!==s&&i.push(e[t]);i.length?this.items[t][n]=i:delete this.items[t][n]}},_listener(e,t){return this.items[e]&&this.items[e][t]?[...this.items[e][t]]:[]}}},g=n(425),v={name:g.name,version:g.version,data:{items:{},usedBy:{},instance:{}},methods:{process(e,{id:t,itemId:n,parentItemId:s,paramType:i,params:l,data:o,results:a,variables:r,lastItem:c}){const d={id:t,itemId:n,parentItemId:s};this.instance[t]||(this.instance[t]={data:{},iteration:{},variables:{},results:{}}),o&&(this.instance[t].data=o),a&&(this.instance[t].results[s]=a),r&&(r=this._processVariables(r,d),this.instance[t].variables={...this.instance[t].variables,...r});const m=this["_data/"+i](l,d);return c&&delete this.instance[t],m},set(e,t){this.items={...this.items,...t}},setUsedBy(e,t){for(const e in t)this.usedBy[e]={...this.usedBy[e],...t[e]}},_getParam(e,t){return e&&e._$id?this.items[e._$id]:e},_get(e,t){if(!e._$computed&&!e._$computedParams&&!e._$id)return e;if((e=this._getParam(e,t.id))._$computedParams)return this.process({...e,...t});const n=this._getParam(e.params,t.id);return this["_"+e.name](n,t)},_getValue(e,t){if(Object.hasOwnProperty.call(t,e))return t[e];if(Object.hasOwnProperty.call(e,"value"))return t;if(Object.hasOwnProperty.call(e,"key")){const n=e.key.split(".");let s={...t};for(let e=0;e<n.length;e++){const i=n[e];if(!Object.hasOwnProperty.call(t,i))return s;s=t[i]}return s}if(Object.hasOwnProperty.call(e,"index"))return t[e.index];if(Object.hasOwnProperty.call(e,"indexes")){const n=[];for(let s=0;s<e.indexes.length;s++){const i=e[s];n.push(t[i])}return n}const n={};for(let s=0;s<e.length;s++){const i=e[s];n[i]=t[i]}return n},_getVariable(e,t){const n=this.instance[t.id].variables[e];if(n)return Array.isArray(n)?[...n]:"object"==typeof n?{...n}:n},_arrayTransform(e,t){const n=e.map,s=e.flat;let i=[],l=e.list;l._$computed&&(l=this._get(l,t));for(let s=0;s<l.length;s++){const o=l[s],a=[];for(let i=0;i<n.length;i++){const l={};for(let e=0;e<n[i].length;e++){const a=n[i][e][0],r=n[i][e][1];if(o[r])l[a]=o[r];else if(Object.hasOwnProperty.call(r,"value"))l[a]=r.value;else if(Object.hasOwnProperty.call(r,"key")){const e=r.key.split(".");let t=o;for(let n=0;n<e.length;n++){const s=e[n];t[s]&&(t=t[s])}l[a]=t}else Object.hasOwnProperty.call(r,"index")?l[a]=s:(this.instance[t.id].iteration={...o,_$index:s},l[a]=this._get(r,t))}e.onIteration&&(this.instance[t.id].iteration={...l,_$index:s},this.$method("dsAction/dispatch",{...e.onIteration,id:t.id,itemId:t.itemId,parentItemId:t.parentItemId})),a.push(l)}i.push(a)}return s&&(i=i.flat(s)),i},_eval(e,t,n){for(let s=0;s<e.length;s++){const i=e[s],l=this._processValues(i.values,t);n+=this.$method("dsOperators/eval",{name:i.name,values:l})}return n},_evalBoolean(e,t){return!!this._eval(e,t,!1)},_evalNumber(e,t){return this._eval(e,t,0)},_evalString(e,t){return this._eval(e,t,"")},_processValues(e,t){const n=[];for(let s=0;s<e.length;s++){const i=e[s];i.value?n.push(i.value):n.push(this._get(i,t))}return n},_processVariables(e,t){const n={};for(let s=0;s<e.length;s++){const i=e[s][0],l=e[s][1];l.value?n[i]=l.value:n[i]=this._get(l,t)}return n},"_getter/plugin/method"(e,t){let n;e.params&&(n=this._get(this._getParam(e.params,t.id),t));const s=this.$method(e.name,n);return e.return?this._getValue(e.return,s):s},"_getter/this/id"(e,{id:t}){return this.instance[t].data.id},"_getter/this/instanceId"(e,{id:t}){return this.instance[t].data.instanceId},"_getter/this/value"(e,{id:t}){const n=this.instance[t].data.value;return e?this._getValue(e,{...n}):n},"_getter/iteration/value"(e,{id:t}){const n=this.instance[t].iteration;return e?this._getValue(e,{...n}):n},"_getter/parent/value"(e,{id:t,parentItemId:n}){e._$itemId&&(n=e._$itemId),console.log(e);const s=this.instance[t].results[n];if(Object.hasOwnProperty.call(s,e))return s[e];if(Object.hasOwnProperty.call(e,"value"))return s;if(Object.hasOwnProperty.call(e,"key")){const t=e.key.split(".");let n=s;for(let e=0;e<t.length;e++){const s=t[e];if(!n[s])return n;n=n[s]}}},"_getter/parent/array"(e,{id:t,parentItemId:n}){const s=[];e._$itemId&&(n=e._$itemId);const i=this.instance[t].results[n];for(let t=0;t<e.indexes.length;t++){const n=e[t];s.push(i[n])}return s},"_getter/parent/object"(e,{id:t,parentItemId:n}){const s={};e._$itemId&&(n=e._$itemId);const i=this.instance[t].results[n];for(let t=0;t<e.keys.length;t++){const n=e[t],l=n.split(".");let o=i;for(let e=0;e<l.length;e++){const t=l[e];o[t]&&(o=o[t])}s[n]=o}return s},"_data/array"(e,t){const n=[];for(let s=0;s<e.length;s++)n.push(this._get(e[s],t));return n},"_data/object"(e,t){const n={};for(let s=0;s<e.length;s++){const i=e[s];n[i[0]]=this._get(i[1],t)}return n},"_data/value"(e,t){return this._get(e,t)}}},f=n(966);let _=e=>crypto.getRandomValues(new Uint8Array(e)),b=(e,t)=>((e,t,n)=>{let s=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*s*t/e.length);return()=>{let l="";for(;;){let o=n(i),a=i;for(;a--;)if(l+=e[o[a]&s]||"",l.length===t)return l}}})(e,t,_);var I={name:f.name,version:f.version,data:{docId:null,instanceId:null},setup({docId:e,instanceId:t}){this.docId=b(e.alphabet,e.alphabetLength),this.instanceId=b(t.alphabet,t.alphabetLength)},methods:{generateDocId(){return this.docId()},generateInstanceId(){return this.instanceId()}}},y=n(130),w={name:y.name,version:y.version,dependencies:[{name:"dsEvent",version:1}],data:{id:"base"+y.name.charAt(0).toUpperCase()+y.name.substring(1),state:{},searchParams:null,items:{},cleanUrlSet:[["a","[ÀÁÂÃÄÅÆĀĂĄẠẢẤẦẨẪẬẮẰẲẴẶ]"],["c","[ÇĆĈČ]"],["d","[ÐĎĐÞ]"],["e","[ÈÉÊËĒĔĖĘĚẸẺẼẾỀỂỄỆ]"],["g","[ĜĞĢǴ]"],["h","[ĤḦ]"],["i","[ÌÍÎÏĨĪĮİỈỊ]"],["j","[Ĵ]"],["ij","[Ĳ]"],["k","[Ķ]"],["l","[ĹĻĽŁ]"],["m","[Ḿ]"],["n","[ÑŃŅŇ]"],["o","[ÒÓÔÕÖØŌŎŐỌỎỐỒỔỖỘỚỜỞỠỢǪǬƠ]"],["oe","[Œ]"],["p","[ṕ]"],["r","[ŔŖŘ]"],["s","[ßŚŜŞŠ]"],["t","[ŢŤ]"],["u","[ÙÚÛÜŨŪŬŮŰŲỤỦỨỪỬỮỰƯ]"],["w","[ẂŴẀẄ]"],["x","[ẍ]"],["y","[ÝŶŸỲỴỶỸ]"],["z","[ŹŻŽ]"],["-","[·/_,:;']"]]},setup(){window.addEventListener("popstate",(e=>{this._updateState(),console.log(e.state,this.state),this.$method("dsApp/update",this.state),this.$action("dsEvent/emit",{id:this.id,name:"navigate",payload:{value:this.currentPathname()}})}))},methods:{getCurrentId(){const e=this.currentPathname();return this.items[e]},getPathById(e,t){return this.items[t]},currentPathname:()=>window.location.pathname,set(e,t){this.items={...this.items,...t},this._updateState()},navigate(e,t){const n=this.currentPathname(),s=this.items[n];let i=this.items[t];if(i)this.$method("dsApp/update",{prevId:s,nextId:i}),window.history.pushState({prevId:s,nextId:i},"",t),this._updateState();else{const e=this.$method("dsRouter/cleanPath",t);this.$action("dsApp/fetch",e,{onSuccess:e=>{i=e.routes[t],this.$method("dsApp/set",e),this.$method("dsApp/update",{prevId:s,nextId:i}),window.history.pushState({prevId:s,nextId:i},"",t),this._updateState(),this.$action("dsEvent/emit",{id:this.id,name:"navigate",payload:this.state})},onError:e=>{console.error(e)}})}},cleanPath(e,t){let n=t.toString().toLowerCase().trim();return n=this._replaceString(n),n.replace(/\s+/g,"-").replace(/[+]/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-")},_updateState(){const e=this.currentPathname();this.state.nextPath!==e&&(this.state.prevPath=this.state.nextPath,this.state.prevId=this.state.nextId,this.state.nextPath=e,this.state.nextId=this.getCurrentId())},_replaceString(e){for(let t=0;t<this.cleanUrlSet.length;t++){const[n,s]=this.cleanUrlSet[t];e=e.replace(new RegExp(s,"gi"),n)}return e}}},x=n(36);function O(e,t=[]){this.name=e.name,this.version=e.version,this._context={},e.data&&(this._context={...e.data});for(let n=0;n<t.length;n++){const s=t[n],i={name:e.name,version:e.version,dependencies:e.dependencies};s.dispatch?this._context[s.name]=s.value(i):this._context[s.name]=s.value}if(e.dependencies&&(this.dependencies=e.dependencies),e.methods){const t={};for(const n in e.methods)if(Object.hasOwnProperty.call(e.methods,n)){const s=e.methods[n];this._context[n]=s,"_"!==n.charAt(0)&&(t[n]=s.bind(this._context))}this.methods=t}e.setup&&(this.setup=e.setup.bind(this._context))}O.prototype.init=function(e){if(this.setup)return this.setup(e)};var E=O;function P({id:e,async:t,crossOrigin:n,defer:s,integrity:i,nonce:l,referrerPolicy:o,src:a,type:r="text/javascript",nomodule:c,customParams:d=[],globalVars:m}){this.queue=[],this.loaded=!1,this.id=`sl__${e}`,this.async=t,this.crossOrigin=n,this.defer=s,this.integrity=i,this.nonce=l,this.referrerPolicy=o,this.src=a,this.type=r,this.nomodule=c,this.customParams=d,this.globalVars=m}P.prototype.loading=function(){return Promise.all(this.queue)},P.prototype.load=function(e){const t=new Promise(((t,n)=>{const s=this.createUrl(e);this.setScript({url:s,resolve:t,reject:n})}));return this.queue.push(t),t},P.prototype.createUrl=function(e){let t=this.src;for(let n=0;n<this.customParams.length;n++){const s=this.customParams[n];t=t.replace(`${s}=`,`${s}=${e[s]}`)}return t},P.prototype.setScript=function({url:e,resolve:t,reject:n}){if(document.getElementById(this.id))return;const s=document.createElement("script");s.id=this.id,s.type=this.type,s.src=e,s.onerror=()=>n(),s.onload=()=>{this.loaded=!0;const e={};if(this.globalVars)for(let t=0;t<this.globalVars.length;t++){const n=this.globalVars[t];e[n]=window[n]}t(e)},this.async&&(s.async=this.async),this.crossOrigin&&(s.crossOrigin=this.crossOrigin),this.defer&&(s.defer=this.defer),this.integrity&&(s.integrity=this.integrity),this.referrerPolicy&&(s.referrerPolicy=this.referrerPolicy),this.nomodule&&(s.nomodule=this.nomodule),this.nonce&&(s.nonce=this.nonce),document.head.appendChild(s)};var $=P,L={name:x.name,version:x.version,data:{_methods:{},buildId:"",additionalPlugins:{},plugins:{},appBuildId:"",appPlugins:[],appAdditionalPlugins:[],queue:{},isLoaded:{},setupOnRequest:{},setupOnRequestQueue:{},metadata:{},context:{}},setup({buildId:e,plugins:t=[],additionalPlugins:n=[],isDev:s}){this.buildId=e,this.context=[{name:"isDev",dispatch:!1,value:s},{name:"$action",dispatch:!0,value:this._action.bind(this)},{name:"$method",dispatch:!0,value:this._method.bind(this)},{name:"ScriptLoader",dispatch:!1,value:$}],this._add({name:x.name,version:x.version,methods:{use:this.use}}),this.isLoaded[x.name]=!0;for(let e=0;e<t.length;e++){const n=t[e];this.plugins[n.item.name]=n.item.version,this.use({},n)}for(let e=0;e<n.length;e++){const t=n[e];this.additionalPlugins[t.item.name]=t.item.version,this.use({},t)}},methods:{use(e,{item:t,options:n={},plugin:s}){if(n.onDemand)return this._addMetadata(t);if(this.isLoaded[t.name])return Promise.resolve();if(this.queue[t.name]&&!this.setupOnRequest[t.name])return this._isLoading(t.name);{this._addMetadata(t);const e=this._install(t.name,s,n.setupOnRequest);this.queue[t.name]=[e]}},_actionExists(e){return this._methods[e]},_addMetadata(e){this.queue[e.name]&&delete this.queue[e.name],this.isLoaded[e.name]=!1,this.metadata[e.name]=e},_callbackWhenAvailable(e,t){if(this._actionExists(e))return t();const n=e.split("/")[0];this.queue[n]&&!this.setupOnRequest[n]?this._isLoading(n).then((()=>{this._actionExists(e)?t():console.error("action does not exist: "+e)})):this.setupOnRequest[n]?this._isLoading(n).then((()=>{this.use({},{item:{name:n}}).then((()=>{this._actionExists(e)?t():console.error("action does not exist: "+e)}))})):this.metadata[n]?this.use({},{item:{name:n}}).then((()=>{this._actionExists(e)?t():console.error("action does not exist: "+e)})):console.error("action does not exist: "+e)},_install(e,t,n){return new Promise(((s,i)=>{this.isLoaded[e]=!1,this.setupOnRequest[e]=!!n,this._load(e,t).then((({plugin:t,setupOptions:l})=>{const o=[];if(n)return this.setupOnRequestQueue[e]=t,s();if(t.dependencies){const n=[];for(let e=0;e<t.dependencies.length;e++){const s=this.use({},{item:{name:t.dependencies[e].name,version:t.dependencies[e].version}});n.push(s)}Promise.all(n).then((()=>{const n=new E(t,this.context),a=this._setup(n,l);a&&o.push(a),Promise.all(o).then((()=>{this._add(n),this.isLoaded[e]=!0,s()})).catch((e=>i(e)))})).catch((e=>i(e)))}else{const n=new E(t,this.context),a=this._setup(n,l);a&&o.push(a),Promise.all(o).then((()=>{this._add(n),this.isLoaded[e]=!0,s()})).catch((e=>i(e)))}})).catch((e=>i(e)))}))},_isLoading(e){return Promise.all(this.queue[e])},_load(e,t){return new Promise(((n,s)=>{let i={},l={id:e};if(this.metadata[e]){const t=this.metadata[e];t||s({statusCode:404,message:"Plugin not found: "+e}),t.script&&(l={...l,...t.script}),t.setupOptions&&(i=t.setupOptions)}return t?n({plugin:t,setupOptions:i}):this.setupOnRequestQueue[e]?(t=this.setupOnRequestQueue[e],delete this.setupOnRequestQueue[e],n({plugin:t,setupOptions:i})):void(l.src?new $(l).load().then((()=>{const t=window.pluginLoader[e];if(t)return n({plugin:t,setupOptions:i});{const t=new Error("Plugin was not found: "+e);return s(t)}})).catch((e=>s(e))):s({statusCode:404,message:"Plugin not found: "+e}))}))},_action(e){return(t,n,s={})=>{this._callbackWhenAvailable(t,(()=>{const i=s.onSuccess,l=s.onError,o=this._methods[t](e,n);l&&o instanceof Error?l.method?l.method({...l.params,results:o}):l(o):o instanceof Promise?Promise.resolve(o).then((e=>{i&&(i.method?i.method({...i.params,results:e}):i(e))})).catch((e=>{l&&(l.method?l.method({...l.params,results:e}):l(e))})):i&&(i.method?i.method({...i.params,results:o}):i(o))}))}},_setup(e,t){const n=e.init(t);if(n instanceof Promise)return n},_add(e){if(e.methods)for(const t in e.methods)if(Object.hasOwnProperty.call(e.methods,t)){const n=e.methods[t];this._methods["".concat(e.name,"/").concat(t)]=n}},_method(e){return(t,n)=>{try{if(this._methods[t])return this._methods[t](e,n);throw new Error('Method "'+t+'" does not exist')}catch(e){console.error(e)}}}}},C=n(946);function T(){var e="/home/thomas/Projects/ds-app/src/app.js",t=new Function("return this")(),n="__coverage__",s=t[n]||(t[n]={});s[e]&&"b9eeff72bf65a086c73db5ccab566f38ce9a269e"===s[e].hash||(s[e]={path:"/home/thomas/Projects/ds-app/src/app.js",statementMap:{0:{start:{line:34,column:4},end:{line:34,column:32}},1:{start:{line:35,column:4},end:{line:35,column:30}},2:{start:{line:36,column:4},end:{line:38,column:6}},3:{start:{line:37,column:6},end:{line:37,column:44}},4:{start:{line:40,column:4},end:{line:40,column:26}},5:{start:{line:43,column:19},end:{line:43,column:56}},6:{start:{line:45,column:4},end:{line:45,column:27}},7:{start:{line:55,column:6},end:{line:70,column:8}},8:{start:{line:56,column:23},end:{line:60,column:10}},9:{start:{line:62,column:8},end:{line:69,column:12}},10:{start:{line:64,column:12},end:{line:64,column:31}},11:{start:{line:67,column:12},end:{line:67,column:28}},12:{start:{line:68,column:12},end:{line:68,column:21}},13:{start:{line:74,column:6},end:{line:77,column:7}},14:{start:{line:75,column:8},end:{line:75,column:56}},15:{start:{line:76,column:8},end:{line:76,column:71}},16:{start:{line:79,column:6},end:{line:82,column:7}},17:{start:{line:80,column:8},end:{line:80,column:59}},18:{start:{line:81,column:8},end:{line:81,column:66}},19:{start:{line:84,column:6},end:{line:90,column:7}},20:{start:{line:85,column:8},end:{line:85,column:65}},21:{start:{line:86,column:8},end:{line:86,column:67}},22:{start:{line:87,column:8},end:{line:87,column:63}},23:{start:{line:88,column:8},end:{line:88,column:68}},24:{start:{line:89,column:8},end:{line:89,column:60}},25:{start:{line:92,column:6},end:{line:92,column:49}},26:{start:{line:93,column:6},end:{line:93,column:47}},27:{start:{line:95,column:6},end:{line:95,column:31}},28:{start:{line:96,column:6},end:{line:96,column:39}},29:{start:{line:97,column:6},end:{line:97,column:39}},30:{start:{line:100,column:23},end:{line:100,column:41}},31:{start:{line:101,column:27},end:{line:101,column:62}},32:{start:{line:102,column:27},end:{line:102,column:66}},33:{start:{line:104,column:23},end:{line:104,column:41}},34:{start:{line:105,column:27},end:{line:105,column:62}},35:{start:{line:106,column:27},end:{line:106,column:66}},36:{start:{line:109,column:6},end:{line:111,column:7}},37:{start:{line:110,column:8},end:{line:110,column:77}},38:{start:{line:113,column:25},end:{line:113,column:52}},39:{start:{line:114,column:25},end:{line:114,column:52}},40:{start:{line:115,column:27},end:{line:115,column:76}},41:{start:{line:117,column:6},end:{line:183,column:7}},42:{start:{line:117,column:19},end:{line:117,column:20}},43:{start:{line:118,column:29},end:{line:118,column:52}},44:{start:{line:119,column:29},end:{line:119,column:52}},45:{start:{line:121,column:8},end:{line:182,column:9}},46:{start:{line:122,column:28},end:{line:122,column:90}},47:{start:{line:123,column:28},end:{line:123,column:90}},48:{start:{line:125,column:10},end:{line:127,column:11}},49:{start:{line:126,column:12},end:{line:126,column:76}},50:{start:{line:129,column:10},end:{line:131,column:11}},51:{start:{line:130,column:12},end:{line:130,column:76}},52:{start:{line:133,column:31},end:{line:133,column:112}},53:{start:{line:135,column:10},end:{line:166,column:11}},54:{start:{line:135,column:23},end:{line:135,column:24}},55:{start:{line:136,column:31},end:{line:136,column:45}},56:{start:{line:137,column:31},end:{line:137,column:45}},57:{start:{line:139,column:12},end:{line:165,column:13}},58:{start:{line:141,column:33},end:{line:144,column:16}},59:{start:{line:146,column:14},end:{line:158,column:15}},60:{start:{line:147,column:36},end:{line:147,column:94}},61:{start:{line:148,column:36},end:{line:148,column:40}},62:{start:{line:149,column:16},end:{line:149,column:60}},63:{start:{line:151,column:16},end:{line:153,column:17}},64:{start:{line:152,column:18},end:{line:152,column:49}},65:{start:{line:155,column:16},end:{line:155,column:60}},66:{start:{line:157,column:16},end:{line:157,column:58}},67:{start:{line:159,column:19},end:{line:165,column:13}},68:{start:{line:160,column:34},end:{line:160,column:92}},69:{start:{line:162,column:14},end:{line:164,column:15}},70:{start:{line:162,column:27},end:{line:162,column:28}},71:{start:{line:163,column:16},end:{line:163,column:39}},72:{start:{line:167,column:15},end:{line:182,column:9}},73:{start:{line:168,column:28},end:{line:168,column:90}},74:{start:{line:170,column:10},end:{line:172,column:11}},75:{start:{line:171,column:12},end:{line:171,column:76}},76:{start:{line:174,column:10},end:{line:181,column:11}},77:{start:{line:174,column:23},end:{line:174,column:24}},78:{start:{line:175,column:31},end:{line:175,column:45}},79:{start:{line:176,column:32},end:{line:176,column:90}},80:{start:{line:178,column:12},end:{line:180,column:13}},81:{start:{line:178,column:25},end:{line:178,column:26}},82:{start:{line:179,column:14},end:{line:179,column:37}},83:{start:{line:186,column:19},end:{line:186,column:37}},84:{start:{line:188,column:23},end:{line:188,column:54}},85:{start:{line:189,column:23},end:{line:189,column:58}},86:{start:{line:191,column:6},end:{line:193,column:7}},87:{start:{line:192,column:8},end:{line:192,column:73}},88:{start:{line:195,column:6},end:{line:214,column:7}},89:{start:{line:195,column:19},end:{line:195,column:20}},90:{start:{line:196,column:25},end:{line:196,column:44}},91:{start:{line:197,column:22},end:{line:197,column:80}},92:{start:{line:199,column:8},end:{line:201,column:9}},93:{start:{line:200,column:10},end:{line:200,column:66}},94:{start:{line:203,column:8},end:{line:213,column:9}},95:{start:{line:203,column:21},end:{line:203,column:22}},96:{start:{line:204,column:25},end:{line:204,column:35}},97:{start:{line:205,column:28},end:{line:208,column:12}},98:{start:{line:210,column:10},end:{line:212,column:11}},99:{start:{line:210,column:23},end:{line:210,column:24}},100:{start:{line:211,column:12},end:{line:211,column:53}},101:{start:{line:217,column:6},end:{line:217,column:45}},102:{start:{line:220,column:6},end:{line:220,column:53}},103:{start:{line:223,column:6},end:{line:223,column:53}},104:{start:{line:226,column:25},end:{line:226,column:74}},105:{start:{line:228,column:6},end:{line:228,column:32}},106:{start:{line:229,column:6},end:{line:229,column:35}},107:{start:{line:230,column:6},end:{line:230,column:76}},108:{start:{line:231,column:6},end:{line:231,column:119}},109:{start:{line:233,column:6},end:{line:237,column:7}},110:{start:{line:234,column:8},end:{line:236,column:10}},111:{start:{line:235,column:10},end:{line:235,column:20}},112:{start:{line:239,column:6},end:{line:239,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:51},end:{line:52,column:3}},line:33},1:{name:"(anonymous_1)",decl:{start:{line:36,column:71},end:{line:36,column:72}},loc:{start:{line:36,column:77},end:{line:38,column:5}},line:36},2:{name:"(anonymous_2)",decl:{start:{line:54,column:4},end:{line:54,column:5}},loc:{start:{line:54,column:24},end:{line:71,column:5}},line:54},3:{name:"(anonymous_3)",decl:{start:{line:55,column:25},end:{line:55,column:26}},loc:{start:{line:55,column:36},end:{line:70,column:7}},line:55},4:{name:"(anonymous_4)",decl:{start:{line:63,column:16},end:{line:63,column:17}},loc:{start:{line:63,column:36},end:{line:65,column:11}},line:63},5:{name:"(anonymous_5)",decl:{start:{line:66,column:17},end:{line:66,column:18}},loc:{start:{line:66,column:22},end:{line:69,column:11}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:72,column:4},end:{line:72,column:5}},loc:{start:{line:72,column:24},end:{line:98,column:5}},line:72},7:{name:"(anonymous_7)",decl:{start:{line:99,column:4},end:{line:99,column:5}},loc:{start:{line:99,column:41},end:{line:184,column:5}},line:99},8:{name:"(anonymous_8)",decl:{start:{line:185,column:4},end:{line:185,column:5}},loc:{start:{line:185,column:29},end:{line:215,column:5}},line:185},9:{name:"(anonymous_9)",decl:{start:{line:216,column:4},end:{line:216,column:5}},loc:{start:{line:216,column:20},end:{line:218,column:5}},line:216},10:{name:"(anonymous_10)",decl:{start:{line:219,column:4},end:{line:219,column:5}},loc:{start:{line:219,column:24},end:{line:221,column:5}},line:219},11:{name:"(anonymous_11)",decl:{start:{line:222,column:4},end:{line:222,column:5}},loc:{start:{line:222,column:24},end:{line:224,column:5}},line:222},12:{name:"(anonymous_12)",decl:{start:{line:225,column:4},end:{line:225,column:5}},loc:{start:{line:225,column:45},end:{line:240,column:5}},line:225},13:{name:"(anonymous_13)",decl:{start:{line:234,column:44},end:{line:234,column:45}},loc:{start:{line:234,column:51},end:{line:236,column:9}},line:234}},branchMap:{0:{loc:{start:{line:33,column:23},end:{line:33,column:36}},type:"default-arg",locations:[{start:{line:33,column:34},end:{line:33,column:36}}],line:33},1:{loc:{start:{line:36,column:36},end:{line:36,column:69}},type:"binary-expr",locations:[{start:{line:36,column:36},end:{line:36,column:54}},{start:{line:36,column:58},end:{line:36,column:69}}],line:36},2:{loc:{start:{line:74,column:6},end:{line:77,column:7}},type:"if",locations:[{start:{line:74,column:6},end:{line:77,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:74},3:{loc:{start:{line:79,column:6},end:{line:82,column:7}},type:"if",locations:[{start:{line:79,column:6},end:{line:82,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},4:{loc:{start:{line:84,column:6},end:{line:90,column:7}},type:"if",locations:[{start:{line:84,column:6},end:{line:90,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:84},5:{loc:{start:{line:109,column:6},end:{line:111,column:7}},type:"if",locations:[{start:{line:109,column:6},end:{line:111,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:109},6:{loc:{start:{line:115,column:27},end:{line:115,column:76}},type:"cond-expr",locations:[{start:{line:115,column:53},end:{line:115,column:63}},{start:{line:115,column:66},end:{line:115,column:76}}],line:115},7:{loc:{start:{line:121,column:8},end:{line:182,column:9}},type:"if",locations:[{start:{line:121,column:8},end:{line:182,column:9}},{start:{line:167,column:15},end:{line:182,column:9}}],line:121},8:{loc:{start:{line:125,column:10},end:{line:127,column:11}},type:"if",locations:[{start:{line:125,column:10},end:{line:127,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:125},9:{loc:{start:{line:129,column:10},end:{line:131,column:11}},type:"if",locations:[{start:{line:129,column:10},end:{line:131,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:129},10:{loc:{start:{line:133,column:31},end:{line:133,column:112}},type:"cond-expr",locations:[{start:{line:133,column:73},end:{line:133,column:91}},{start:{line:133,column:94},end:{line:133,column:112}}],line:133},11:{loc:{start:{line:139,column:12},end:{line:165,column:13}},type:"if",locations:[{start:{line:139,column:12},end:{line:165,column:13}},{start:{line:159,column:19},end:{line:165,column:13}}],line:139},12:{loc:{start:{line:146,column:14},end:{line:158,column:15}},type:"if",locations:[{start:{line:146,column:14},end:{line:158,column:15}},{start:{line:156,column:21},end:{line:158,column:15}}],line:146},13:{loc:{start:{line:151,column:16},end:{line:153,column:17}},type:"if",locations:[{start:{line:151,column:16},end:{line:153,column:17}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:151},14:{loc:{start:{line:159,column:19},end:{line:165,column:13}},type:"if",locations:[{start:{line:159,column:19},end:{line:165,column:13}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:159},15:{loc:{start:{line:167,column:15},end:{line:182,column:9}},type:"if",locations:[{start:{line:167,column:15},end:{line:182,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:167},16:{loc:{start:{line:170,column:10},end:{line:172,column:11}},type:"if",locations:[{start:{line:170,column:10},end:{line:172,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:170},17:{loc:{start:{line:191,column:6},end:{line:193,column:7}},type:"if",locations:[{start:{line:191,column:6},end:{line:193,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},18:{loc:{start:{line:199,column:8},end:{line:201,column:9}},type:"if",locations:[{start:{line:199,column:8},end:{line:201,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:199},19:{loc:{start:{line:225,column:14},end:{line:225,column:33}},type:"default-arg",locations:[{start:{line:225,column:22},end:{line:225,column:33}}],line:225},20:{loc:{start:{line:226,column:25},end:{line:226,column:74}},type:"binary-expr",locations:[{start:{line:226,column:25},end:{line:226,column:40}},{start:{line:226,column:44},end:{line:226,column:74}}],line:226},21:{loc:{start:{line:233,column:6},end:{line:237,column:7}},type:"if",locations:[{start:{line:233,column:6},end:{line:237,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:233}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0],20:[0,0],21:[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b9eeff72bf65a086c73db5ccab566f38ce9a269e"});var i=s[e];return T=function(){return i},i}T();var S={name:C.name,version:C.version,dependencies:[{name:"dsRouter",version:1},{name:"dsContent",version:1},{name:"dsWidget",version:1}],data:{cssElement:null,assetsURL:"",appElement:null,pages:{},pageTypes:{},template:{}},setup({appElement:e,appCache:t=(T().b[0][0]++,{}),assetsURL:n}){T().f[0]++,T().s[0]++,this.appElement=e,T().s[1]++,this.assetsURL=n,T().s[2]++,this.cssElement=this._loadCSS((T().b[1][0]++,t.app.theme||(T().b[1][1]++,"bootstrap")),(()=>{T().f[1]++,T().s[3]++,e.classList.remove("loading")})),T().s[4]++,this.set({},t);const s=(T().s[5]++,this.$method("dsRouter/getCurrentId"));T().s[6]++,this.render({},s)},methods:{fetch(e,t){return T().f[2]++,T().s[7]++,new Promise((e=>{T().f[3]++;const n=(T().s[8]++,new this.ScriptLoader({id:"ds-app-cache__"+t,src:this.assetsURL+"/app_cache/"+window.location.hostname+"/"+t+".js",globalVars:["dsAppCache"]}));T().s[9]++,n.load().then((({dsAppCache:t})=>{T().f[4]++,T().s[10]++,e(t)})).catch((t=>{T().f[5]++,T().s[11]++,console.error(t),T().s[12]++,e()}))}))},set(e,t){T().f[6]++,T().s[13]++,t.actions?(T().b[2][0]++,T().s[14]++,this.$method("dsAction/set",t.actions.items),T().s[15]++,this.$method("dsAction/setConditions",t.actions.conditions)):T().b[2][1]++,T().s[16]++,t.params?(T().b[3][0]++,T().s[17]++,this.$method("dsParameters/set",t.params.items),T().s[18]++,this.$method("dsParameters/setUsedBy",t.params.usedBy)):T().b[3][1]++,T().s[19]++,t.widgets?(T().b[4][0]++,T().s[20]++,this.$method("dsWidget/setContent",t.widgets.content),T().s[21]++,this.$method("dsWidget/setChildren",t.widgets.children),T().s[22]++,this.$method("dsWidget/setLayout",t.widgets.layout),T().s[23]++,this.$method("dsWidget/setBaseItem",t.widgets.baseItems),T().s[24]++,this.$method("dsWidget/setItem",t.widgets.items)):T().b[4][1]++,T().s[25]++,this.$method("dsContent/set",t.content),T().s[26]++,this.$method("dsRouter/set",t.routes),T().s[27]++,this._setPage(t.pages),T().s[28]++,this._setPageType(t.pageTypes),T().s[29]++,this._setTemplate(t.templates)},update(e,{prevId:t,nextId:n}){T().f[7]++;const s=(T().s[30]++,this.pages[t]),i=(T().s[31]++,this.pageTypes[s.pageTypeId]),l=(T().s[32]++,this.templates[i.templateId]),o=(T().s[33]++,this.pages[n]),a=(T().s[34]++,this.pageTypes[o.pageTypeId]),r=(T().s[35]++,this.templates[a.templateId]);T().s[36]++,r.classList?(T().b[5][0]++,T().s[37]++,document.body.setAttribute("class",r.classList.join(" "))):T().b[5][1]++;const c=(T().s[38]++,r.widgets.length),d=(T().s[39]++,l.widgets.length),m=(T().s[40]++,c>d?(T().b[6][0]++,c):(T().b[6][1]++,d));T().s[41]++;for(let e=(T().s[42]++,0);e<m;e++){const s=(T().s[43]++,r.widgets[e]),i=(T().s[44]++,l.widgets[e]);if(T().s[45]++,s){T().b[7][0]++;let e=(T().s[46]++,this.$method("dsWidget/getItem",t+"__"+i)),l=(T().s[47]++,this.$method("dsWidget/getItem",n+"__"+s));T().s[48]++,e?T().b[8][1]++:(T().b[8][0]++,T().s[49]++,e=this.$method("dsWidget/getBaseItem",i)),T().s[50]++,l?T().b[9][1]++:(T().b[9][0]++,T().s[51]++,l=this.$method("dsWidget/getBaseItem",s));const o=(T().s[52]++,l.length>e.length?(T().b[10][0]++,l.length):(T().b[10][1]++,e.length));T().s[53]++;for(let t=(T().s[54]++,0);t<o;t++){const n=(T().s[55]++,l[t]),s=(T().s[56]++,e[t]);if(T().s[57]++,n){T().b[11][0]++;const e=(T().s[58]++,this.$method("dsWidget/create",{layoutId:n.layoutId,instanceId:n.instanceId}));if(T().s[59]++,s){T().b[12][0]++;const t=(T().s[60]++,this.$method("dsWidget/getElement",s.instanceId));let n=(T().s[61]++,null);T().s[62]++,n=t[0].parentElement,T().s[63]++,n?T().b[13][1]++:(T().b[13][0]++,T().s[64]++,n=this.appElement),T().s[65]++,n.replaceChildren(...e)}else T().b[12][1]++,T().s[66]++,this.appElement.appendChild(...e)}else if(T().b[11][1]++,T().s[67]++,s){T().b[14][0]++;const e=(T().s[68]++,this.$method("dsWidget/getElement",s.instanceId));T().s[69]++;for(let t=(T().s[70]++,0);t<e.length;t++)T().s[71]++,e[t].remove()}else T().b[14][1]++}}else if(T().b[7][1]++,T().s[72]++,i){T().b[15][0]++;let e=(T().s[73]++,this.$method("dsWidget/getItem",t+"__"+i));T().s[74]++,e?T().b[16][1]++:(T().b[16][0]++,T().s[75]++,e=this.$method("dsWidget/getBaseItem",i)),T().s[76]++;for(let t=(T().s[77]++,0);t<e.length;t++){const n=(T().s[78]++,e[t]),s=(T().s[79]++,this.$method("dsWidget/getElement",n.instanceId));T().s[80]++;for(let e=(T().s[81]++,0);e<s.length;e++)T().s[82]++,s[e].remove()}}else T().b[15][1]++}},render(e,t){T().f[8]++;const n=(T().s[83]++,this.pages[t]),s=(T().s[84]++,this.pageTypes[n.pageTypeId]),i=(T().s[85]++,this.templates[s.templateId]);T().s[86]++,i.classList?(T().b[17][0]++,T().s[87]++,document.body.setAttribute("class",i.classList.join(" "))):T().b[17][1]++,T().s[88]++;for(let e=(T().s[89]++,0);e<i.widgets.length;e++){const n=(T().s[90]++,i.widgets[e]);let s=(T().s[91]++,this.$method("dsWidget/getItem",t+"__"+n));T().s[92]++,s?T().b[18][1]++:(T().b[18][0]++,T().s[93]++,s=this.$method("dsWidget/getBaseItem",n)),T().s[94]++;for(let e=(T().s[95]++,0);e<s.length;e++){const t=(T().s[96]++,s[e]),n=(T().s[97]++,this.$method("dsWidget/create",{layoutId:t.layoutId,instanceId:t.instanceId}));T().s[98]++;for(let e=(T().s[99]++,0);e<n.length;e++)T().s[100]++,this.appElement.appendChild(n[e])}}},_setPage(e){T().f[9]++,T().s[101]++,this.pages={...this.pages,...e}},_setPageType(e){T().f[10]++,T().s[102]++,this.pageTypes={...this.pageTypes,...e}},_setTemplate(e){T().f[11]++,T().s[103]++,this.templates={...this.templates,...e}},_loadCSS(e=(T().b[19][0]++,"bootstrap"),t){T().f[12]++;const n=(T().s[104]++,T().b[20][0]++,this.cssElement||(T().b[20][1]++,document.createElement("link")));return T().s[105]++,n.id="ds-theme",T().s[106]++,n.rel="stylesheet",T().s[107]++,n.href=this.assetsURL+"/assets/css/"+e+".min.css",T().s[108]++,document.head.insertBefore(n,document.head.childNodes[document.head.childNodes.length-1].nextSibling),T().s[109]++,t?(T().b[21][0]++,T().s[110]++,n.addEventListener("load",(e=>{T().f[13]++,T().s[111]++,t()}))):T().b[21][1]++,T().s[112]++,n}}};function A(){var e="/home/thomas/Projects/ds-app/src/index.js",t=new Function("return this")(),n="__coverage__",s=t[n]||(t[n]={});s[e]&&"9e8cbbfe7a90188bb5ca4556d2f160253c66b5bd"===s[e].hash||(s[e]={path:"/home/thomas/Projects/ds-app/src/index.js",statementMap:{0:{start:{line:15,column:16},end:{line:116,column:1}},1:{start:{line:117,column:0},end:{line:117,column:24}},2:{start:{line:118,column:0},end:{line:145,column:1}},3:{start:{line:121,column:26},end:{line:121,column:49}},4:{start:{line:123,column:4},end:{line:137,column:6}},5:{start:{line:139,column:4},end:{line:143,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:45},end:{line:144,column:3}},line:120}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9e8cbbfe7a90188bb5ca4556d2f160253c66b5bd"});var i=s[e];return A=function(){return i},i}A();const j=(A().s[0]++,[{item:{name:w.name,version:w.version},plugin:w,options:{setupOnRequest:!1}},{item:{name:o.name,version:o.version},plugin:o,options:{setupOnRequest:!1}},{item:{name:r.name,version:r.version},plugin:r,options:{setupOnRequest:!1}},{item:{name:d.name,version:d.version},plugin:d,options:{setupOnRequest:!1}},{item:{name:i.name,version:i.version},plugin:i,options:{setupOnRequest:!1}},{item:{name:p.name,version:p.version},plugin:p,options:{setupOnRequest:!1}},{item:{name:v.name,version:v.version},plugin:v,options:{setupOnRequest:!1}},{item:{name:u.name,version:u.version},plugin:u,options:{setupOnRequest:!1}},{item:{name:I.name,version:I.version,setupOptions:{docId:{alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",alphabetLength:20},instanceId:{alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",alphabetLength:17}}},plugin:I,options:{setupOnRequest:!1}}]);A().s[1]++,window.pluginLoader={},A().s[2]++,window.dsApp={plugins:{},init({appCache:e,appElement:n,assetsURL:s}){A().f[0]++;const i=(A().s[3]++,new t(L));A().s[4]++,j.push({item:{name:S.name,version:S.version,setupOptions:{appCache:e,appElement:n,assetsURL:s}},plugin:S,options:{setupOnRequest:!1}}),A().s[5]++,i.init({build:1,plugins:j,isDev:!0})}}})(),window.pluginLoader.dsApp={}.default})();
//# sourceMappingURL=ds-app.js.map